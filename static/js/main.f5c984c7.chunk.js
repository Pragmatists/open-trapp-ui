(this["webpackJsonpopen-trapp-ui"]=this["webpackJsonpopen-trapp-ui"]||[]).push([[0],{106:function(e){e.exports=JSON.parse('{"c":["projects","internal","trainings","sick","vacation","vacation-special","holiday"],"a":{"internal":["brown-bag","blog","recruitment","standup","rada","self-dev","sales","onboarding","project-estimation","meetings","gdansk","conference","preparation","workshop","office","www","ux-process","cx"]},"b":["projects"]}')},326:function(e,t,n){},332:function(e,t,n){},354:function(e,t){},356:function(e,t){},370:function(e,t){},372:function(e,t){},400:function(e,t){},402:function(e,t){},403:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},418:function(e,t){},437:function(e,t){},449:function(e,t){},452:function(e,t){},473:function(e,t,n){},476:function(e,t,n){},477:function(e,t,n){},480:function(e,t,n){},481:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},495:function(e,t,n){},496:function(e,t,n){},497:function(e,t,n){},498:function(e,t,n){},499:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},504:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},508:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){},511:function(e,t,n){},512:function(e,t,n){},513:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){},516:function(e,t,n){},517:function(e,t,n){},518:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(23),c=(n(326),n(64)),o=n(600),i=n(601),s=n(306),u=Object(s.a)({palette:{secondary:{main:"#f5f5f5"},primary:{main:"#2d6ca2"},error:{main:"#c7254e"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),l=n(614),d=n(577),j=n(68),b=n(18),h=n(10),O=(n(332),n.p+"static/media/openTrapp.94cb3a9f.svg"),p=n(282),f=n.n(p),g=n(26),x=n(27),m=n(283),v=n.n(m),y=n(22),k=n.n(y),w=n(168),_=n(139),N=n(570),C=n(199);var E=function(){function e(){Object(g.a)(this,e)}return Object(x.a)(e,null,[{key:"authorizedUser",get:function(){var t,n=localStorage.getItem(e.AUTHORIZED_USER_KEY),r=n?JSON.parse(n):void 0;return r?(t=r.token,1e3*Object(C.decode)(t).exp<(new Date).getTime()?(e.clearAuthorizedUser(),null):r):null},set:function(t){localStorage.setItem(e.AUTHORIZED_USER_KEY,JSON.stringify(t))}},{key:"clearAuthorizedUser",value:function(){localStorage.removeItem(e.AUTHORIZED_USER_KEY)}}]),e}();E.AUTHORIZED_USER_KEY="OpenTrappUser";var A=function(){function e(){Object(g.a)(this,e),this.axiosInstance=void 0,this.decorateRequestWithAuthToken=function(t){var n=e.apiToken;return null!=n&&(t.headers.Authorization="Bearer ".concat(n)),t},this.handleErrorResponse=function(e){return console.error("HTTP request failed, status: ".concat(e.response.status),e),401===e.response.status&&(E.clearAuthorizedUser(),window.location.reload()),Promise.reject(e)},this.axiosInstance=v.a.create({baseURL:e.API_ROOT_URL,headers:{Authorization:"Bearer ".concat(e.apiToken)}}),this.axiosInstance.interceptors.request.use(this.decorateRequestWithAuthToken,(function(e){return Promise.reject(e)})),this.axiosInstance.interceptors.response.use(void 0,this.handleErrorResponse)}return Object(x.a)(e,[{key:"obtainJWTToken",value:function(e){return this.axios.get("/authentication/user-token",{headers:{"id-token":e}}).then((function(e){return e.data}))}},{key:"calendarMonth",value:function(e,t){return this.get("/calendar/".concat(e,"/").concat(t))}},{key:"workLogEntries",value:function(e,t){return this.get("/calendar/".concat(e,"/").concat(t,"/work-log/entries"))}},{key:"saveWorkLog",value:function(e,t,n,r,a){return this.post("/employee/".concat(e,"/work-log/entries"),{projectNames:n,workload:r,day:t,note:a}).pipe(Object(_.a)((function(e){return e.id})))}},{key:"updateWorkLog",value:function(e,t,n){return Object(w.a)(this.axios.put("/work-log/entries/".concat(e),{projectNames:t,workload:n})).pipe(Object(_.a)((function(e){return e.data})))}},{key:"removeWorkLog",value:function(e){return this.delete("/work-log/entries/".concat(e)).pipe(Object(N.a)(e))}},{key:"validateBulkEditQuery",value:function(e){return this.axios.get("/work-log/bulk-update/".concat(e)).then((function(e){return e.data}))}},{key:"bulkEdit",value:function(e){return this.post("/work-log/bulk-update",e)}},{key:"tags",value:function(e){var t=e?"/projects?dateFrom=".concat(k()().subtract(e,"months").format("YYYY-MM-DD")):"/projects";return this.get(t)}},{key:"presets",value:function(e){var t=e?"/projects/presets?limit=".concat(e):"/projects/presets";return this.get(t)}},{key:"serviceAccounts",get:function(){return this.get("/admin/service-accounts")}},{key:"creteServiceAccount",value:function(e){return this.axios.post("/admin/service-accounts",{name:e}).then((function(e){return e.data}))}},{key:"deleteServiceAccount",value:function(e){return this.delete("/admin/service-accounts/".concat(e)).pipe(Object(N.a)(e))}},{key:"authorizedUsers",get:function(){return this.get("/admin/users")}},{key:"axios",get:function(){return this.axiosInstance}},{key:"post",value:function(e,t,n){return Object(w.a)(this.axios.post(e,t,n)).pipe(Object(_.a)((function(e){return e.data})))}},{key:"get",value:function(e,t){return Object(w.a)(this.axios.get(e,t)).pipe(Object(_.a)((function(e){return e.data})))}},{key:"delete",value:function(e){return Object(w.a)(this.axios.delete(e))}}],[{key:"apiToken",get:function(){var e=E.authorizedUser;return e?e.token:void 0}}]),e}();A.API_ROOT_URL="".concat("https://opentrapp.eu-central-1.elasticbeanstalk.com","/api/v1");var S=new A,L="AUTHENTICATION_LOGIN_SUCCESS",T="AUTHENTICATION_LOGIN_FAILURE",D="AUTHENTICATION_LOGOUT",R="LOAD_MONTH",I="MONTH_LOADED",M="MONTH_CHANGED",W="LOAD_WORK_LOGS",P="WORK_LOGS_LOADED",Y="SAVE_WORK_LOG",U="LOAD_TAGS",z="TAGS_LOADED",G="UPDATE_WORK_LOG",F="WORK_LOG_UPDATED",B="REMOVE_WORK_LOG",H="WORK_LOG_REMOVED",q="BULK_EDIT_REQUEST",K="BULK_EDIT_DONE",V="WORK_LOG_CHANGED",J="WORK_LOG_SAVED",Z="LOAD_PRESETS",Q="PRESETS_LOADED",$="NOTIFICATION_CREATED",X="NOTIFICATION_DISMISSED",ee="LOAD_SERVICE_ACCOUNTS",te="SERVICE_ACCOUNTS_LOADED",ne="DELETE_SERVICE_ACCOUNT",re="SERVICE_ACCOUNT_DELETED",ae="LOAD_AUTHORIZED_USERS",ce="AUTHORIZED_USERS_LOADED",oe=n(1),ie=function(e){var t=e.buttonText,n=Object(h.b)(),r=Object(b.g)();return Object(oe.jsx)(f.a,{clientId:"522512788382-la0g5vpsf2q8anekstsh2l551m1ba4oe.apps.googleusercontent.com",responseType:"id_token",buttonText:t,onSuccess:function(e){var t=e.getAuthResponse().id_token;S.obtainJWTToken(t).then((function(e){return E.authorizedUser=e,e})).then((function(e){return n({type:L,payload:e})})).then((function(e){return r.push("/registration")})).catch((function(e){return n({type:T,payload:e})}))},onFailure:function(e){return console.error("Google login failed",e)}})},se=n(9),ue=n(575),le=n(310),de=n(616),je=(n(473),function(e){var t=e.username,n=e.profilePicture,a=e.avatarOnly,c=e.onLogout,o=Object(r.useState)(null),i=Object(se.a)(o,2),s=i[0],u=i[1],l=Boolean(s);return Object(oe.jsxs)("div",{className:"user-details","data-testid":"user-details",children:[Object(oe.jsxs)("div",{onClick:function(e){return u(e.currentTarget)},className:"user-details__user user",children:[Object(oe.jsx)(de.a,{alt:t,src:n}),!a&&Object(oe.jsx)("div",{className:"user__name",children:t})]}),Object(oe.jsxs)(le.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:function(){return u(null)},children:[Object(oe.jsx)(ue.a,{children:"Settings"}),Object(oe.jsx)(ue.a,{onClick:c,children:"Logout"})]})]})}),be=function(e){var t=e.avatarOnly,n=Object(h.c)((function(e){var t;return null===(t=e.authentication.user)||void 0===t?void 0:t.displayName})),r=Object(h.c)((function(e){var t;return null===(t=e.authentication.user)||void 0===t?void 0:t.profilePicture})),a=Object(h.b)(),c=Object(b.g)();return Object(oe.jsx)(je,{onLogout:function(){E.clearAuthorizedUser(),a({type:D}),c.push("/")},avatarOnly:t,username:n,profilePicture:r})},he=n(39),Oe=n(6),pe=function(e){var t,n=e.workLog.workLogs||[],r=null===(t=e.authentication.user)||void 0===t?void 0:t.name,a=n.filter((function(e){return e.employee===r})).map((function(e){return e.projectNames})).reduce((function(e,t){return[].concat(Object(he.a)(e),Object(he.a)(t))}),[]);return Object(Oe.uniq)(a)},fe=function(e){var t;return null===(t=e.authentication.user)||void 0===t?void 0:t.name},ge=function(e){return e.authentication.loggedIn},xe=function(e){return e.calendar.selectedMonth},me=n(607),ve=n(576),ye=n(150),ke=n.n(ye),we=n(100),_e=n.n(we),Ne=n(286),Ce=n.n(Ne),Ee=function(e){var t=e.path,n=e.onNavigate,r=e.showAdminPage;return Object(oe.jsxs)(me.a,{className:"app-bar-tabs","data-testid":"app-bar-tabs",value:t,onChange:function(e,t){return n(t)},indicatorColor:"primary",children:[Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(ke.a,{}),value:"/registration",label:"Registration"}),Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(_e.a,{}),value:"/reporting",label:"Reporting"}),r&&Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(Ce.a,{}),value:"/admin",label:"Admin"})]})},Ae=function(){var e=Object(b.h)().pathname,t=Object(b.g)(),n=Object(h.c)(ge),r=Object(h.c)((function(e){var t;return null===(t=e.authentication.user)||void 0===t?void 0:t.roles})),a=function(){return t.push("/")};return Object(oe.jsx)(d.a,{position:"sticky",color:"secondary",children:Object(oe.jsxs)("div",{className:"header-desktop",children:[Object(oe.jsx)("img",{src:O,alt:"",className:"header-desktop__logo",onClick:a}),Object(oe.jsxs)(j.a,{variant:"h5",color:"inherit",className:"header-desktop__text",onClick:a,children:["Open",Object(oe.jsx)("span",{children:"Trapp"})]}),n&&Object(oe.jsx)(Ee,{path:e,showAdminPage:Object(Oe.includes)(r,"ADMIN"),onNavigate:function(e){return t.push(e)}}),n?Object(oe.jsx)(be,{}):Object(oe.jsx)(ie,{})]})})},Se=(n(476),function(){var e=Object(b.g)(),t=Object(h.c)(ge);return Object(oe.jsxs)(d.a,{position:"static",className:"header-mobile",color:"secondary",children:[Object(oe.jsxs)(j.a,{variant:"h5",color:"inherit",className:"header-mobile__header-text header-text",onClick:function(){return e.push("/registration")},children:["Open",Object(oe.jsx)("span",{children:"Trapp"})]}),Object(oe.jsx)("div",{className:"header-mobile__icon",children:t?Object(oe.jsx)(be,{avatarOnly:!0}):Object(oe.jsx)(ie,{buttonText:"Sign in"})})]})}),Le=n(578),Te=n(288),De=n.n(Te),Re=n(289),Ie=n.n(Re),Me=n(290),We=n.n(Me),Pe=(n(477),n(287)),Ye=function(e){var t=e.title,n=e.text,r=e.icon;return Object(oe.jsxs)("div",{className:"landing-page-card card","data-testid":"landing-page-card",children:[r,Object(oe.jsx)("h2",{className:"card__title",children:t}),Object(oe.jsx)(Le.a,{variant:"middle",className:"card__divider"}),Object(oe.jsx)("div",{className:"card__text",children:n})]})},Ue=function(){return Object(oe.jsxs)("div",{className:"landing-page",children:[Object(oe.jsx)("div",{className:"landing-page__header header",children:Object(oe.jsxs)("div",{className:"header__content",children:[Object(oe.jsx)("h1",{children:"Welcome to OpenTrapp!"}),Object(oe.jsx)("p",{children:"Capture your time into the simplest time registration application on the Internet."})]})}),Object(oe.jsxs)("div",{className:"landing-page__content content",children:[Object(oe.jsx)(Ye,{title:"Easy time capture",text:"Powerful expression language will help you quickly register your work.",icon:Object(oe.jsx)(De.a,{className:"card__icon",color:"primary"})}),Object(oe.jsx)(Ye,{title:"Intuitive reporting",text:"Review your reports by applying different filters and enjoy the results in various presentation forms.",icon:Object(oe.jsx)(Ie.a,{className:"card__icon",color:"primary"})}),Object(oe.jsx)(Ye,{title:"OpenID integration",text:"No registration required. You can simply use your existing Gmail account to sign in.",icon:Object(oe.jsx)(We.a,{className:"card__icon",color:"primary"})})]})]})},ze=function(){var e=Object(h.c)(ge),t=Object(b.h)(),n=Object(Pe.parse)(t.search.replace("?","")).redirect;return n?Object(oe.jsx)(b.a,{to:{pathname:n,state:{from:t}}}):e?Object(oe.jsx)(b.a,{to:{pathname:"/registration",state:{from:t}}}):Object(oe.jsx)(Ue,{})},Ge=function(e){var t=e.component,n=e.path,r=Object(h.c)(ge),a=t;return Object(oe.jsx)(b.b,{path:n,render:function(e){return r?Object(oe.jsx)(a,{}):Object(oe.jsx)(b.a,{to:{pathname:"/",state:{from:e.location}}})}})},Fe=(n(480),function(){return Object(oe.jsxs)("div",{className:"not-found",children:[Object(oe.jsx)("div",{className:"not-found__code",children:"404"}),Object(oe.jsx)("div",{className:"not-found__text",children:"Page not found"})]})}),Be=n(151),He=(n(481),n(14)),qe=n(169),Ke=n(201),Ve=n(617),Je=n(583),Ze=n(156),Qe=n.n(Ze),$e=(n(482),n(611)),Xe=n(579),et=n(580),tt=n(581),nt=n(582),rt=(n(483),function(e){var t=e.open,n=e.onClose;return Object(oe.jsxs)($e.a,{open:t,className:"work-log-help-dialog",children:[Object(oe.jsx)(Xe.a,{children:"Examples of usage"}),Object(oe.jsxs)(et.a,{children:[Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #my-project"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours"})," to ",Object(oe.jsx)("strong",{children:"my-project"})," for ",Object(oe.jsx)("strong",{children:"today"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #my-project @yesterday"}),Object(oe.jsx)("code",{children:"1d #my-project @t-1"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours"})," to ",Object(oe.jsx)("strong",{children:"my-project"})," for ",Object(oe.jsx)("strong",{children:"yesterday"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d 2h 15m #my-project"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"10 hours and 15 minutes"})," to ",Object(oe.jsx)("strong",{children:"my-project"})," for ",Object(oe.jsx)("strong",{children:"today"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #my-project @1966/02/26"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours"})," to ",Object(oe.jsx)("strong",{children:"my-project"})," on ",Object(oe.jsx)("strong",{children:"Feburary 26, 1966"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #my-project @monday"}),Object(oe.jsx)("code",{children:"1d #my-project @last-monday"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours "})," to ",Object(oe.jsx)("strong",{children:"my project"})," for ",Object(oe.jsx)("strong",{children:"last monday"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #my-project @next-monday"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours "})," to ",Object(oe.jsx)("strong",{children:"my project"})," for ",Object(oe.jsx)("strong",{children:"next monday"}),"."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #main-project #sub-project @today"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"8 hours "})," to ",Object(oe.jsx)("strong",{children:"main-project"}),", precisely ",Object(oe.jsx)("strong",{children:"sub-project"})," for ",Object(oe.jsx)("strong",{children:"today"})," (8 hours total, not 16)."]})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("code",{children:"1d #vacations @2018/07/01~@2018/07/31"}),Object(oe.jsxs)("p",{children:["Report ",Object(oe.jsx)("strong",{children:"month "})," of ",Object(oe.jsx)("strong",{children:"vacations"})," for working days in ",Object(oe.jsx)("strong",{children:"July"}),"."]})]})]}),Object(oe.jsx)(tt.a,{children:Object(oe.jsx)(nt.a,{onClick:n,color:"primary",children:"Close"})})]})}),at=n(152),ct=n(291),ot=n(307),it=n(308),st=function(e){Object(ct.a)(n,e);var t=Object(ot.a)(n);function n(e,r,a,c){var o;return Object(g.a)(this,n),(o=t.call(this)).message=void 0,o.expected=void 0,o.found=void 0,o.location=void 0,o.name=void 0,o.message=e,o.expected=r,o.found=a,o.location=c,o.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(Object(at.a)(o),n),o}return Object(x.a)(n,null,[{key:"buildMessage",value:function(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function c(e){switch(e.type){case"literal":return'"'+r(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,n,r=e.map(c);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+(((o=t)?'"'+r(o)+'"':"end of input")+" found.");var o}}]),n}(Object(it.a)(Error));var ut=function(e,t){t=void 0!==t?t:{};var n,r={},a={WorkLogEntry:_e},c=_e,o=function(e){return{workload:e}},i=me("d",!1),s=me("h",!1),u=me("m",!1),l=me("#",!1),d=me("@",!1),j=function(e){return function(e){var t=qe().day(e);return!t.isBefore(qe(),"day")&&!t.isAfter(qe(),"day")}(e)?qe().format(He):Ke(e).format(He)},b="last-",h=me("last-",!1),O="next-",p=me("next-",!1),f=function(e){return function(e){var t=qe().day(e);t.isAfter(qe(),"day")||t.add(7,"days");return t}(e).format(He)},g=function(e){if(k()(e,He).isValid())return k()(e,He).format(He);!function(e,t){throw t=void 0!==t?t:ke(pe,Oe),function(e,t){return new st(e,[],"",t)}(e,t)}("Not a valid date")},x=/^[Mm]/,m=ve(["M","m"],!1,!1),v="onday",y=me("onday",!1),w=/^[Tt]/,_=ve(["T","t"],!1,!1),N="uesday",C=me("uesday",!1),E=/^[Ww]/,A=ve(["W","w"],!1,!1),S="ednesday",L=me("ednesday",!1),T="hursday",D=me("hursday",!1),R=/^[Ff]/,I=ve(["F","f"],!1,!1),M="riday",W=me("riday",!1),P=/^[Ss]/,Y=ve(["S","s"],!1,!1),U="aturday",z=me("aturday",!1),G="unday",F=me("unday",!1),B="/",H=me("/",!1),q=/^[01]/,K=ve(["0","1"],!1,!1),V=/^[0-3]/,J=ve([["0","3"]],!1,!1),Z=/^[Yy]/,Q=ve(["Y","y"],!1,!1),$="esterday",X=me("esterday",!1),ee="oday",te=me("oday",!1),ne="omorrow",re=me("omorrow",!1),ae=me("t",!1),ce=/^[+-]/,oe=ve(["+","-"],!1,!1),ie=" ",se=me(" ",!1),ue=/^[^ ]/,le=ve([" "],!0,!1),de=/^[0-9]/,je=ve([["0","9"]],!1,!1),be=/^[1-9]/,he=ve([["1","9"]],!1,!1),Oe=0,pe=0,fe=[{line:1,column:1}],ge=0,xe=[];if(void 0!==t.startRule){if(!(t.startRule in a))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=a[t.startRule]}function me(e,t){return{type:"literal",text:e,ignoreCase:t}}function ve(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function ye(t){var n,r=fe[t];if(r)return r;for(n=t-1;!fe[n];)n--;for(r={line:(r=fe[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return fe[t]=r,r}function ke(e,t){var n=ye(e),r=ye(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function we(e){Oe<ge||(Oe>ge&&(ge=Oe,xe=[]),xe.push(e))}function _e(){var e,t,n;return e=Oe,(t=Ee())!==r&&We()!==r&&(n=Ne())!==r?(pe=e,e=t=Ve(t,n)):(Oe=e,e=r),e===r&&(e=Oe,(t=De())!==r&&We()!==r&&(n=function(){var e,t,n;e=Oe,(t=Ee())!==r&&We()!==r&&(n=Ie())!==r?(pe=e,e=t=function(e,t){return Ve(e,t)}(t,n)):(Oe=e,e=r);e===r&&(e=Oe,(t=Ie())!==r&&We()!==r&&(n=Ee())!==r?(pe=e,e=t=function(e,t){return Ve(t,e)}(t,n)):(Oe=e,e=r));return e}())!==r?(pe=e,e=t=Ve(t,n)):(Oe=e,e=r),e===r&&(e=Oe,(t=Ie())!==r&&We()!==r&&(n=Ce())!==r?(pe=e,e=t=Ve(n,t)):(Oe=e,e=r),e===r&&(e=Oe,(t=Ne())!==r&&(pe=e,t=function(e){return Ve(e,{workload:"1d"})}(t)),(e=t)===r&&(e=Oe,(t=Ce())!==r&&(pe=e,t=function(e){return Ve(e,{day:qe().format(He)})}(t)),(e=t)===r&&(e=Oe,(t=De())!==r&&(pe=e,t=function(e){return Ve(e,{workload:"1d",day:qe().format(He)})}(t)),e=t))))),e}function Ne(){var e,t,n;return e=Oe,(t=De())!==r&&We()!==r&&(n=Ie())!==r?(pe=e,e=t=Ve(t,n)):(Oe=e,e=r),e===r&&(e=Oe,(t=Ie())!==r&&We()!==r&&(n=De())!==r?(pe=e,e=t=function(e,t){return Ve(t,e)}(t,n)):(Oe=e,e=r)),e}function Ce(){var e,t,n;return e=Oe,(t=Ee())!==r&&We()!==r&&(n=De())!==r?(pe=e,e=t=Ve(t,n)):(Oe=e,e=r),e===r&&(e=Oe,(t=De())!==r&&We()!==r&&(n=Ee())!==r?(pe=e,e=t=function(e,t){return Ve(t,e)}(t,n)):(Oe=e,e=r)),e}function Ee(){var e,t;return e=Oe,(t=function(){var e,t,n;e=Oe,(t=Se())!==r&&Pe()!==r&&(n=Ae())!==r?(pe=e,e=t=t+" "+n):(Oe=e,e=r);e===r&&(e=Oe,(t=Se())!==r&&Pe()!==r&&(n=Te())!==r?(pe=e,e=t=function(e,t){return e+" "+t}(t,n)):(Oe=e,e=r),e===r&&(e=Se()));return e}())!==r&&(pe=e,t=o(t)),(e=t)===r&&(e=Oe,(t=Ae())!==r&&(pe=e,t=o(t)),(e=t)===r&&(e=Oe,(t=Te())!==r&&(pe=e,t=o(t)),e=t)),e}function Ae(){var e,t,n;return e=Oe,(t=Le())!==r&&Pe()!==r&&(n=Te())!==r?(pe=e,e=t=t+" "+n):(Oe=e,e=r),e===r&&(e=Le()),e}function Se(){var t,n,a,c;return t=Oe,n=Oe,(a=Ye())!==r?(100===e.charCodeAt(Oe)?(c="d",Oe++):(c=r,we(i)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),t=n!==r?e.substring(t,Oe):n}function Le(){var t,n,a,c;return t=Oe,n=Oe,(a=Ye())!==r?(104===e.charCodeAt(Oe)?(c="h",Oe++):(c=r,we(s)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),t=n!==r?e.substring(t,Oe):n}function Te(){var t,n,a,c;return t=Oe,n=Oe,(a=Ye())!==r?(109===e.charCodeAt(Oe)?(c="m",Oe++):(c=r,we(u)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),t=n!==r?e.substring(t,Oe):n}function De(){var e,t,n;if(e=Oe,t=[],(n=Re())!==r)for(;n!==r;)t.push(n),n=Re();else t=r;return t!==r&&(pe=e,t={projectNames:t}),e=t}function Re(){var t,n,a;return t=Oe,Pe()!==r?(35===e.charCodeAt(Oe)?(n="#",Oe++):(n=r,we(l)),n!==r&&(a=function(){var t,n,a;t=Oe,n=[],ue.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(le));if(a!==r)for(;a!==r;)n.push(a),ue.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(le));else n=r;t=n!==r?e.substring(t,Oe):n;return t}())!==r?(pe=t,t=a):(Oe=t,t=r)):(Oe=t,t=r),t}function Ie(){var t,n,a;return t=Oe,64===e.charCodeAt(Oe)?(n="@",Oe++):(n=r,we(d)),n!==r&&(a=function(){var t,n,a;t=Oe,(n=Me())!==r&&(pe=t,n=j(n));(t=n)===r&&(t=Oe,e.substr(Oe,5)===b?(n=b,Oe+=5):(n=r,we(h)),n!==r&&(a=Me())!==r?(pe=t,t=n=Ke(a).format(He)):(Oe=t,t=r),t===r&&(t=Oe,e.substr(Oe,5)===O?(n=O,Oe+=5):(n=r,we(p)),n!==r&&(a=Me())!==r?(pe=t,t=n=f(a)):(Oe=t,t=r),t===r&&(t=Oe,(n=function(){var t,n,a,c,o,i,s;t=Oe,n=Oe,(a=function(){var e,t,n,a,c;e=Oe,(t=ze())!==r&&(n=Ue())!==r&&(a=Ue())!==r&&(c=Ue())!==r?e=t=[t,n,a,c]:(Oe=e,e=r);return e}())!==r?(47===e.charCodeAt(Oe)?(c=B,Oe++):(c=r,we(H)),c!==r&&(o=function(){var t,n,a;t=Oe,q.test(e.charAt(Oe))?(n=e.charAt(Oe),Oe++):(n=r,we(K));n!==r&&(a=Ue())!==r?t=n=[n,a]:(Oe=t,t=r);t===r&&(t=ze());return t}())!==r?(47===e.charCodeAt(Oe)?(i=B,Oe++):(i=r,we(H)),i!==r&&(s=function(){var t,n,a;t=Oe,V.test(e.charAt(Oe))?(n=e.charAt(Oe),Oe++):(n=r,we(J));n!==r&&(a=Ue())!==r?t=n=[n,a]:(Oe=t,t=r);t===r&&(t=ze());return t}())!==r?n=a=[a,c,o,i,s]:(Oe=n,n=r)):(Oe=n,n=r)):(Oe=n,n=r);t=n!==r?e.substring(t,Oe):n;return t}())!==r&&(pe=t,n=g(n)),(t=n)===r&&(t=Oe,(n=function(){var t,n,a,c;t=Oe,n=Oe,Z.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(Q));a!==r?(e.substr(Oe,8)===$?(c=$,Oe+=8):(c=r,we(X)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r);n===r&&(n=Oe,w.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(_)),a!==r?(e.substr(Oe,4)===ee?(c=ee,Oe+=4):(c=r,we(te)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,w.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(_)),a!==r?(e.substr(Oe,7)===ne?(c=ne,Oe+=7):(c=r,we(re)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r)));t=n!==r?e.substring(t,Oe):n;return t}())!==r&&(pe=t,n=function(e){e=e.toLowerCase();var t=qe();return"yesterday"===e?t.subtract(1,"days"):"tomorrow"===e&&t.add(1,"days"),t.format(He)}(n)),(t=n)===r&&(t=function(){var t,n,a,c;t=Oe,116===e.charCodeAt(Oe)?(n="t",Oe++):(n=r,we(ae));n!==r?(ce.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(oe)),a!==r&&(c=Ye())!==r?(pe=t,t=n=function(e,t){var n=e+t;return qe().add(n,"days").format(He)}(a,c)):(Oe=t,t=r)):(Oe=t,t=r);return t}())))));return t}())!==r?(pe=t,t=n={day:a}):(Oe=t,t=r),t}function Me(){var t,n,a,c;return t=Oe,n=Oe,x.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(m)),a!==r?(e.substr(Oe,5)===v?(c=v,Oe+=5):(c=r,we(y)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,w.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(_)),a!==r?(e.substr(Oe,6)===N?(c=N,Oe+=6):(c=r,we(C)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,E.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(A)),a!==r?(e.substr(Oe,8)===S?(c=S,Oe+=8):(c=r,we(L)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,w.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(_)),a!==r?(e.substr(Oe,7)===T?(c=T,Oe+=7):(c=r,we(D)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,R.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(I)),a!==r?(e.substr(Oe,5)===M?(c=M,Oe+=5):(c=r,we(W)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,P.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(Y)),a!==r?(e.substr(Oe,7)===U?(c=U,Oe+=7):(c=r,we(z)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r),n===r&&(n=Oe,P.test(e.charAt(Oe))?(a=e.charAt(Oe),Oe++):(a=r,we(Y)),a!==r?(e.substr(Oe,5)===G?(c=G,Oe+=5):(c=r,we(F)),c!==r?n=a=[a,c]:(Oe=n,n=r)):(Oe=n,n=r))))))),t=n!==r?e.substring(t,Oe):n}function We(){var t,n;if(t=[],32===e.charCodeAt(Oe)?(n=ie,Oe++):(n=r,we(se)),n!==r)for(;n!==r;)t.push(n),32===e.charCodeAt(Oe)?(n=ie,Oe++):(n=r,we(se));else t=r;return t}function Pe(){var t,n;for(t=[],32===e.charCodeAt(Oe)?(n=ie,Oe++):(n=r,we(se));n!==r;)t.push(n),32===e.charCodeAt(Oe)?(n=ie,Oe++):(n=r,we(se));return t}function Ye(){var t,n,a,c,o;if(t=Oe,n=Oe,(a=ze())!==r){for(c=[],o=Ue();o!==r;)c.push(o),o=Ue();c!==r?n=a=[a,c]:(Oe=n,n=r)}else Oe=n,n=r;return(t=n!==r?e.substring(t,Oe):n)===r&&(t=Ue()),t}function Ue(){var t;return de.test(e.charAt(Oe))?(t=e.charAt(Oe),Oe++):(t=r,we(je)),t}function ze(){var t;return be.test(e.charAt(Oe))?(t=e.charAt(Oe),Oe++):(t=r,we(he)),t}var Ge,Fe,Be,He="YYYY/MM/DD";function qe(){return k()(t.timeProvider.getCurrentDate())}function Ke(e){var t=qe().day(e);return t.isBefore(qe(),"day")||t.subtract(7,"days"),t}function Ve(e,t){for(var n in t)e[n]=t[n];return e}if((n=c())!==r&&Oe===e.length)return n;throw n!==r&&Oe<e.length&&we({type:"end"}),Ge=xe,Fe=ge<e.length?e.charAt(ge):null,Be=ge<e.length?ke(ge,ge+1):ke(ge,ge),new st(st.buildMessage(Ge,Fe),Ge,Fe,Be)},lt=n(292),dt=Object(lt.extendMoment)(k.a);function jt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY/MM/DD",r=k()(e,n),a=k()(t,n);if(a.isBefore(r)){var c=r;r=a,a=c}var o=dt.range(r,a);return Array.from(o.by("days")).map((function(e){return e.format(n)}))}var bt=function(){function e(){Object(g.a)(this,e)}return Object(x.a)(e,[{key:"getCurrentDate",value:function(){return new Date}}]),e}(),ht=n(106),Ot=function(){function e(t,n,r,a,c){Object(g.a)(this,e),this.expression=t,this.days=n,this.tags=r,this.workload=a,this.note=c}return Object(x.a)(e,[{key:"validate",value:function(){var t=[];return 1!==this.tags.filter((function(e){return ht.c.includes(e)})).length&&t.push(e.EXACTLY_ONE_TOP_LEVEL_TAG_ALLOWED_MSG),this.tags.filter((function(e){return ht.b.includes(e)})).length>0&&this.tags.length<2&&t.push("Missing specific project tag: #projects #your-project-name"),Object(Oe.isEmpty)(this.workload)&&t.push("Workload was not provided"),e.workloadExceeds24Hours(this.workload)&&t.push("Workload can't exceed 24 hours"),{valid:0===t.length,errors:t}}},{key:"withAddedTags",value:function(t){return new e(this.expression,this.days,Object(Oe.union)(this.tags,t),this.workload)}},{key:"withDays",value:function(t){var n=e.daysToExpression(t);return new e(this.newExpression(n),t,this.tags,this.workload)}},{key:"withNote",value:function(t){return new e(this.expression,this.days,this.tags,this.workload,t)}},{key:"newExpression",value:function(t){return e.DATE_RANGE_PATTERN.test(this.expression)?this.expression.replace(e.DATE_RANGE_PATTERN,t):e.DATE_PATTERN.test(this.expression)?this.expression.replace(e.DATE_PATTERN,t):Object(Oe.isEmpty)(this.expression)?t:this.expression+" "+t}}],[{key:"empty",value:function(){return new e("",[],[],void 0)}},{key:"from",value:function(t,n,r){var a=t.map((function(e){return"#".concat(e)})).join(", "),c=n?"":"@".concat(n);return new e("".concat(r," ").concat(a," ").concat(c),[n],t,r)}},{key:"daysToExpression",value:function(e){return 0===Object(Oe.size)(e)?"":1===Object(Oe.size)(e)?"@".concat(e[0]):"@".concat(e[0],"~@").concat(e[e.length-1])}},{key:"workloadExceeds24Hours",value:function(t){var n=e.WORKLOAD_PATTERN.exec(t);return 8*e.parseGroup(n[1])*60+60*e.parseGroup(n[2])+e.parseGroup(n[3])>1440}},{key:"parseGroup",value:function(e){return e?Object(Oe.toInteger)(e):0}}]),e}();Ot.WORKLOAD_PATTERN=/(?:([0-9]+)d)?\s?(?:([0-9]+)h)?\s?(?:([0-9]+)m)?/,Ot.DATE_RANGE_PATTERN=/@[A-Z0-9/a-z-+]+~@[A-Z0-9/a-z-+]+/g,Ot.DATE_PATTERN=/@[A-Z0-9/a-z-+]+/g,Ot.EXACTLY_ONE_TOP_LEVEL_TAG_ALLOWED_MSG="Exactly one of the following tags required: ".concat(ht.c.map((function(e){return"#"+e})).join(", "));var pt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bt;Object(g.a)(this,e),this.timeProvider=t}return Object(x.a)(e,[{key:"parse",value:function(e){if(this.hasDatesRange(e)){var t=this.daysFromRangeExpression(e),n=t.noDateExpression,r=t.datesRange,a=this.parseExpression(n);return new Ot(e,r,a.tags,a.workload)}if(this.hasDate(e)){var c=this.dayFromExpression(e),o=this.parseExpression(e);return new Ot(e,[c],o.tags,o.workload)}return this.parseExpression(e)}},{key:"isValid",value:function(e){return this.parse(e).validate().valid}},{key:"parseExpression",value:function(e){try{var t=ut(Object(Oe.trim)(e),{timeProvider:this.timeProvider});return new Ot(e,[t.day],t.projectNames,t.workload)}catch(n){return new Ot(e,[],[],void 0)}}},{key:"hasDatesRange",value:function(e){return Ot.DATE_RANGE_PATTERN.test(e)}},{key:"hasDate",value:function(e){return Ot.DATE_PATTERN.test(e)}},{key:"daysFromRangeExpression",value:function(e){var t=e.match(/@[A-Z0-9/a-z-+]+~/g),n=e.match(/~@[A-Z0-9/a-z-+]+/g),r=t[0].substring(0,t[0].length-1),a=n[0].substring(1);return{noDateExpression:e.replace(Ot.DATE_RANGE_PATTERN,""),datesRange:this.datesArray(r,a)}}},{key:"dayFromExpression",value:function(e){var t=e.match(Ot.DATE_PATTERN)[0];return this.parseExpression("#tag ".concat(t)).days[0]}},{key:"datesArray",value:function(t,n){var r=ut("1h #projects "+t,{timeProvider:this.timeProvider}),a=ut("1h #projects "+n,{timeProvider:this.timeProvider});return jt(r.day,a.day,e.DATE_FORMAT)}}]),e}();pt.DATE_FORMAT="YYYY/MM/DD";var ft=n(154),gt=n.n(ft),xt=n(293),mt=n.n(xt),vt=n(294),yt=n.n(vt),kt=function(e){var t=e.isHighlighted,n=e.suggestion,r=e.query,a=mt()(n.label,r),c=yt()(n.label,a);return Object(oe.jsx)(ue.a,{selected:t,component:"div",children:Object(oe.jsx)("div",{children:c.map((function(e,t){return e.highlight?Object(oe.jsx)("span",{style:{fontWeight:500},children:e.text},String(t)):Object(oe.jsx)("strong",{style:{fontWeight:300},children:e.text},String(t))}))})})},wt=function(){function e(t,n){Object(g.a)(this,e),this.tags=t,this.presets=n}return Object(x.a)(e,[{key:"suggestions",value:function(t,n){var r=this.presetSuggestions(t,n),a=this.tagSuggestions(t,n,e.SUGGESTIONS_LIMIT-r.length);return[].concat(Object(he.a)(r),Object(he.a)(a))}},{key:"tagSuggestions",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.SUGGESTIONS_LIMIT,a=this.trimPrefix(n);return this.tags.filter((function(e){return e.toLowerCase().startsWith(a)})).slice(0,r).map((function(e){return e.trim()})).sort().map((function(e){return{label:e,value:t.replace(new RegExp("".concat(n,"$")),"#".concat(e," "))}}))}},{key:"presetSuggestions",value:function(t,n){var r=this.trimPrefix(n);return this.presets.filter((function(e){return Object(Oe.some)(e.tags,(function(e){return e.toLowerCase().startsWith(r)}))})).slice(0,e.SUGGESTIONS_LIMIT).map((function(e){return{label:e.tags.join(", "),value:t.replace(new RegExp("".concat(n,"$")),e.tags.map((function(e){return"#".concat(e," ")})).join(""))}}))}},{key:"trimPrefix",value:function(e){return e.replace("#","")}}]),e}();wt.SUGGESTIONS_LIMIT=5;var _t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bt;Object(g.a)(this,e),this.workLogExpressionParser=void 0,this.workLogExpressionParser=new pt(t)}return Object(x.a)(e,[{key:"suggestions",value:function(t,n){var r=this,a=n.replace("@","");return e.POSSIBLE_SUGGESTIONS.map((function(e){return{label:e,day:r.mapSuggestionToDay(e)}})).filter((function(e){return Object(Oe.startsWith)(e.label,a)||Object(Oe.startsWith)(e.day,a)})).slice(0,5).map((function(e){return{label:e.label,value:t.replace(new RegExp("".concat(n,"$")),"@".concat(e.label," "))}}))}},{key:"mapSuggestionToDay",value:function(e){return this.workLogExpressionParser.parse("1d #proj @"+e).day}}]),e}();_t.POSSIBLE_SUGGESTIONS=["today","yesterday","tomorrow","monday","tuesday","wednesday","thursday","friday","saturday","sunday","t-1","t-2","t-3"];var Nt=function(e){var t=e.open,n=e.newTags,r=e.onClose,a=e.workLog;return Object(oe.jsxs)($e.a,{open:t,onClose:function(){return r(a,!1)},children:[Object(oe.jsx)(Xe.a,{children:"New tags will be created"}),Object(oe.jsxs)(et.a,{"data-testid":"confirm-new-tags",children:[Object(oe.jsxs)("p",{children:["This action will add new ",n.length>1?" tags":"tag",": ",Object(oe.jsx)("strong",{children:n.join(", ")}),"."]}),Object(oe.jsx)("p",{children:"Make sure you really want to do this!"})]}),Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:function(){return r(a,!1)},"data-testid":"cancel-new-tags-button",children:"Cancel"}),Object(oe.jsx)(nt.a,{onClick:function(){return r(a,!0)},color:"primary",autoFocus:!0,children:"Confirm"})]})]})},Ct=n(155),Et=n.n(Ct),At=(n(495),n(295)),St=n.n(At),Lt=n(573),Tt=function(e){var t=e.workLog,n=Object(r.useState)(null),a=Object(se.a)(n,2),c=a[0],o=a[1],i=Boolean(c),s=t.validate();return s.valid?Object(oe.jsx)(St.a,{htmlColor:"#5BC440","data-testid":"ok-indicator"}):Object(Oe.isEmpty)(t.expression)?null:Object(oe.jsxs)(r.Fragment,{children:[Object(oe.jsx)(Je.a,{"aria-label":"Help",onClick:function(e){return o(e.currentTarget)},"data-testid":"error-indicator",children:Object(oe.jsx)(Et.a,{color:"error"})}),Object(oe.jsx)(Lt.a,{open:i,anchorEl:c,onClose:function(){return o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:s.errors.map((function(e){return Object(oe.jsx)(j.a,{className:"validation-error",children:e},e)}))})]})},Dt=n(606),Rt=function(e){return Object(Oe.isEmpty)(Object(Oe.trim)(e))?"Description cannot be empty":e.length>1e3?"Description cannot be longer than 1000 characters":void 0},It=function(e){var t=e.open,n=e.onCancel,a=e.onConfirm,c=Object(r.useState)(""),o=Object(se.a)(c,2),i=o[0],s=o[1],u=Object(r.useState)(void 0),l=Object(se.a)(u,2),d=l[0],j=l[1];Object(r.useEffect)((function(){s(""),j(void 0)}),[t]);return Object(oe.jsxs)($e.a,{open:t,onClose:n,children:[Object(oe.jsx)(Xe.a,{children:"Self-dev description"}),Object(oe.jsxs)(et.a,{children:[Object(oe.jsx)("p",{children:"Short description is required to report a self-dev"}),Object(oe.jsx)(Dt.a,{"aria-label":"self-dev description",multiline:!0,type:"text",value:i,onChange:function(e){return t=e.target.value,j(Rt(t)),void s(t);var t},error:!!d,size:"medium",helperText:d,fullWidth:!0})]}),Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:n,children:"Cancel"}),Object(oe.jsx)(nt.a,{onClick:function(){var e=Rt(i);e?j(e):a(Object(Oe.trim)(i))},children:"Confirm"})]})]})},Mt=["inputRef","ref"],Wt=function(e){var t=e.inputRef,n=void 0===t?Oe.noop:t,r=e.ref,a=Object(qe.a)(e,Mt);return Object(oe.jsx)(Ve.a,Object(He.a)({fullWidth:!0,inputRef:function(e){r(e),n(e)}},a))},Pt=function(e,t){var n=t.query,r=t.isHighlighted;return Object(oe.jsx)(kt,{isHighlighted:r,suggestion:e,query:n})},Yt=new pt,Ut=function(e){var t=e.workLog,n=e.onChange,a=e.autoAddedTagsMapping,c=e.tags,o=e.presets,i=e.onSave,s=Object(r.useState)(!1),u=Object(se.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)([]),b=Object(se.a)(j,2),h=b[0],O=b[1],p=Object(r.useState)([]),f=Object(se.a)(p,2),g=f[0],x=f[1],m=Object(r.useState)(!1),v=Object(se.a)(m,2),y=v[0],k=v[1],w=function(e){return e.trim().split(/[\s,]+/).pop()};return Object(oe.jsxs)(Ke.a,{className:"work-log-input",elevation:1,children:[Object(oe.jsx)(gt.a,{renderInputComponent:Wt,getSuggestionValue:function(e){return e.value},inputProps:{className:"work-log-input__input",placeholder:"1d #my-project",value:t.expression,autoFocus:!0,onChange:function(e,t){var r=t.newValue,c=Yt.parse(r),o=c.tags.filter((function(e){return a.has(e)})),i=Object(Oe.flatMap)(o,(function(e){return a.get(e)}));n(c.withAddedTags(i))},onKeyPress:function(e){if("Enter"===e.key&&t.validate().valid){var n=Object(Oe.difference)(t.tags,c);t.tags.includes("self-dev")?k(!0):Object(Oe.isEmpty)(n)?i(t):x(n)}}},onSuggestionsFetchRequested:function(e){var t=e.value;return O(function(e){var t=w(e);return Object(Oe.isEmpty)(t)?[]:t.startsWith("#")?new wt(c,o).suggestions(e,t):t.startsWith("@")?(new _t).suggestions(e,t):[]}(t))},onSuggestionsClearRequested:function(){return O([])},onSuggestionSelected:function(e){return e.preventDefault()},shouldRenderSuggestions:function(e){var t=w(e);return!!t&&(t.startsWith("#")||t.startsWith("@"))},renderSuggestion:Pt,suggestions:h,renderSuggestionsContainer:function(e){return Object(oe.jsx)(Ke.a,Object(He.a)(Object(He.a)({},e.containerProps),{},{children:e.children}))}}),Object(oe.jsx)(Tt,{workLog:t}),Object(oe.jsx)(Je.a,{"aria-label":"Help",onClick:function(){return d(!0)},children:Object(oe.jsx)(Qe.a,{color:"primary"})}),Object(oe.jsx)(rt,{open:l,onClose:function(){return d(!1)}}),Object(oe.jsx)(Nt,{workLog:t,newTags:g,onClose:function(e,t){t&&i(e),x([])},open:!Object(Oe.isEmpty)(g)}),Object(oe.jsx)(It,{open:y,onCancel:function(){return k(!1)},onConfirm:function(e){i(t.withNote(e)),k(!1)}})]})},zt=function(){return{type:R}},Gt=function(e,t){return{type:M,payload:{year:e,month:t}}},Ft=function(e){return{type:U,payload:e}},Bt=function(e){return{type:z,payload:e}},Ht=function(e){return{type:B,payload:e}},qt=function(e){return{type:H,payload:e}},Kt=function(){return{type:K}},Vt=function(e){return{type:V,payload:{days:e.days,tags:e.tags,workload:e.workload,expression:e.expression,valid:e.validate().valid}}},Jt=function(e){return{type:Y,payload:e}},Zt=(n(496),function(){var e=Object(r.useState)(!1),t=Object(se.a)(e,2),n=t[0],a=t[1];return Object(oe.jsxs)("span",{children:[Object(oe.jsx)(Je.a,{className:"work-log-input__help","aria-label":"Help",onClick:function(){return a(!0)},children:Object(oe.jsx)(Qe.a,{color:"primary"})}),Object(oe.jsxs)($e.a,{open:n,className:"rules-dialog",children:[Object(oe.jsx)(Xe.a,{children:"Zasady"}),Object(oe.jsxs)(et.a,{children:[Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:["Rejestrowanie dla ",Object(oe.jsx)("strong",{children:"projektu"}),", np.:"]}),Object(oe.jsx)("code",{children:"#projects #rightmove"}),Object(oe.jsx)("code",{children:"#projects #talkie"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:["Rejestrowanie ",Object(oe.jsx)("strong",{children:"prowadzenia szkolenia"}),", np:"]}),Object(oe.jsx)("code",{children:"#trainings #open-training"}),Object(oe.jsx)("code",{children:"#trainings #coaching #orange"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:["Rejestrowanie ",Object(oe.jsx)("strong",{children:"przygotowania do szkolenia"}),", np:"]}),Object(oe.jsx)("code",{children:"#trainings #preparation #nokia"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:["Rejestrowanie ",Object(oe.jsx)("strong",{children:"wewn\u0119trznego czasu"}),":"]}),Object(oe.jsx)("code",{children:"#internal #brown-bag"}),Object(oe.jsx)("code",{children:"#internal #recruitment"}),Object(oe.jsx)("code",{children:"#internal #lean-coffee"}),Object(oe.jsx)("code",{children:"#internal #self-development #conference"}),Object(oe.jsx)("code",{children:"#internal #JUnitParams"}),Object(oe.jsx)("code",{children:"#internal #standup"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("p",{children:["Rejestrowanie ",Object(oe.jsx)("strong",{children:"chor\xf3b i urlop\xf3w:"})]}),Object(oe.jsx)("code",{children:"#sick"}),Object(oe.jsx)("code",{children:"#vacation"})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("p",{children:"Zasady dla nowych tag\xf3w s\u0105 nast\u0119puj\u0105ce:"}),Object(oe.jsxs)("ul",{children:[Object(oe.jsx)("li",{children:"s\u0142owa oddzielamy minusami, a nie CamelCase"}),Object(oe.jsx)("li",{children:"projekty dla jednego klienta prefiksujemy nazw\u0105 klienta"})]}),Object(oe.jsx)("p",{children:"Rejestrujemy urlopy i choroby, niezale\u017cnie od rodzaju umowy."}),Object(oe.jsx)("p",{children:"Efekt oczekiwany jest taki, \u017ce na koniec miesi\u0105ca ka\u017cdy ma zarejestrowane tyle samo godzin (w zale\u017cno\u015bci od liczby dni pracuj\u0105cych w miesi\u0105cu), z dok\u0142adno\u015bci\u0105 do ewentualnych nadgodzin i prac weekendowych."})]})]}),Object(oe.jsx)(tt.a,{children:Object(oe.jsx)(nt.a,{onClick:function(){return a(!1)},color:"primary",children:"Close"})})]})]})}),Qt=(n(497),n(587)),$t=n(588),Xt=n(589),en=n(586),tn=n(584),nn=n(157),rn=n.n(nn),an=n(585);function cn(e){if(null===e||void 0===e||e<0)return"INVALID";if(0===e)return"0h";var t=Math.floor(e/480),n=e%480,r=Math.floor(n/60),a=n%60;return[t>0?"".concat(t,"d"):void 0,r>0?"".concat(r,"h"):void 0,a>0?"".concat(a,"m"):void 0].filter((function(e){return void 0!==e})).join(" ")}function on(e){return e?Object(Oe.round)(e/60,2):e}var sn=function(e){var t=e.children,n=e.day,r=e.selected,a=e.onClick,c=e["data-testid"],o=rn()("report-table__cell",{"report-table__cell--weekend":n.weekend,"report-table__cell--holiday":n.holiday,"report-table__cell--selected":r});return Object(oe.jsx)(tn.a,{className:o,onClick:function(e){e.stopPropagation(),e.preventDefault(),a(n,e.shiftKey)},"data-testid":c,children:t})},un=function(e){var t=e.day,n=e.workload,r=k()(t.id,"YYYY/MM/DD"),a=k()(),c=(a.month()>r.month()||a.year()>r.year())&&Object(Oe.isNil)(n)&&!t.holiday&&!t.weekend;return Object(oe.jsx)(sn,Object(He.a)(Object(He.a)({},e),{},{children:Object(oe.jsx)("div",{children:c?Object(oe.jsx)(Et.a,{className:"missing-workload-icon","data-testid":"missing-workload-icon"}):on(n)})}))},ln=function(e){var t=k()(e.day.id,"YYYY/MM/DD");return Object(oe.jsxs)(sn,Object(He.a)(Object(He.a)({},e),{},{children:[Object(oe.jsx)("div",{children:t.date()}),Object(oe.jsx)("div",{className:"day-name",children:t.format("ddd")})]}))},dn=function(e){var t=e.days,n=e.workLogs,r=Object(Oe.chain)(Object(Oe.values)(n)).flatten().groupBy((function(e){return e.day})).mapValues((function(e){return Object(Oe.reduce)(e,(function(e,t){return e+t.workload}),0)})).value(),a=Object(Oe.chain)(r).values().sum().value(),c=function(e){return rn()("report-table__cell",{"report-table__cell--weekend":e.weekend,"report-table__cell--holiday":e.holiday})};return Object(oe.jsx)(an.a,{children:Object(oe.jsxs)(en.a,{className:"report-table__row","data-testid":"table-footer-row",children:[Object(oe.jsx)(tn.a,{className:"report-table__cell report-table__cell--bold",children:"Total"}),t.map((function(e,t){return Object(oe.jsx)(tn.a,{className:c(e),children:on(r[e.id])},t)})),Object(oe.jsx)(tn.a,{className:"report-table__cell report-table__cell--bold","data-total-value":!0,children:on(a)})]})})},jn=function(e){var t=e.employee,n=e.workLogs,r=e.singleEmployee,a=e.days,c=e.onCellClick,o=Object(Oe.chain)(n).groupBy((function(e){return e.day})).mapValues((function(e){return Object(Oe.reduce)(e,(function(e,t){return e+t.workload}),0)})).value(),i=Object(Oe.chain)(o).values().sum().value();return Object(oe.jsxs)(en.a,{className:"report-table__row","data-testid":"employee-row",children:[!r&&Object(oe.jsx)(tn.a,{className:"report-table__cell",children:t}),a.map((function(e,t){return Object(oe.jsx)(un,{day:e,workload:o[e.id],selected:e.selected,onClick:c,"data-testid":"month-day-value"},t)})),Object(oe.jsx)(tn.a,{className:"report-table__cell report-table__cell--bold","data-testid":"month-total-value",children:on(i)})]},t)},bn=function(e){var t=e.workLogs,n=e.days,r=void 0===n?[]:n,a=e.selectedDays,c=void 0===a?[]:a,o=e.onSelect,i=void 0===o?Oe.noop:o,s=Object(Oe.entries)(t),u=1===s.length,l=r.map((function(e){return Object(He.a)(Object(He.a)({},e),{},{selected:c.includes(e.id)})})),d=function(e,t){t&&1===Object(Oe.size)(c)?i(jt(c[0],e.id)):i([e.id])};return Object(oe.jsx)("div",{className:"monthly-report","data-testid":"monthly-report",children:Object(oe.jsxs)(Qt.a,{className:"monthly-report__report-table report-table",children:[Object(oe.jsx)($t.a,{children:Object(oe.jsxs)(en.a,{className:"report-table__header-row",children:[!u&&Object(oe.jsx)(tn.a,{className:"report-table__cell report-table__cell--bold",children:"Employee"}),l.map((function(e,t){return Object(oe.jsx)(ln,{day:e,selected:e.selected,onClick:d,"data-testid":"month-day-header"},t)})),Object(oe.jsx)(tn.a,{className:"report-table__cell report-table__cell--bold header-cell",children:"Total"})]})}),Object(oe.jsx)(Xt.a,{children:s.map((function(e){return Object(oe.jsx)(jn,{employee:e[0],workLogs:e[1],singleEmployee:u,days:l,onCellClick:d},e[0])}))}),!u&&Object(oe.jsx)(dn,{days:l,workLogs:t})]})})},hn=n(296),On=n.n(hn),pn=n(297),fn=n.n(pn),gn=(n(498),function(e){var t=e.days,n=e.workLogs,r=e.selectedMonth,a=e.selectedDays,c=e.onDaysSelected,o=e.onChange;return Object(oe.jsxs)("div",{className:"registration-page-month",children:[Object(oe.jsxs)("div",{className:"registration-page-month__header",children:[Object(oe.jsx)("span",{children:r.toString()})," month worklog"]}),Object(oe.jsx)(Le.a,{variant:"fullWidth"}),Object(oe.jsxs)("div",{className:"registration-page-month__description",children:[Object(oe.jsx)("span",{children:"Click"})," on date to set it on worklog expression"]}),Object(oe.jsxs)("div",{className:"registration-page-month__description",children:[Object(oe.jsx)("span",{children:"Shift + Click"})," on date to set dates range on worklog expression"]}),Object(oe.jsx)(Ke.a,{children:Object(oe.jsx)(bn,{days:t,workLogs:n,selectedDays:a,onSelect:c})}),Object(oe.jsxs)("div",{className:"registration-page-month__navigate-section",children:[Object(oe.jsxs)(nt.a,{variant:"contained",color:"primary",onClick:function(){return o(r.previous)},children:[Object(oe.jsx)(On.a,{}),"Previous"]}),Object(oe.jsxs)(nt.a,{variant:"contained",color:"primary",onClick:function(){return o(r.next)},children:["Next",Object(oe.jsx)(fn.a,{})]})]})]})}),xn=function(e){return{type:Z,payload:e}},mn=function(e){return{type:Q,payload:e}},vn=function(){function e(t,n){Object(g.a)(this,e),this.year=t,this.month=n}return Object(x.a)(e,[{key:"next",get:function(){return 12===this.month?new e(this.year+1,1):new e(this.year,this.month+1)}},{key:"previous",get:function(){return 1===this.month?new e(this.year-1,12):new e(this.year,this.month-1)}},{key:"range",value:function(t,n){return[].concat(Object(he.a)(e.previousMonths(this,t)),[this],Object(he.a)(e.nextMonths(this,n)))}},{key:"minus",value:function(e){return 0===e?this:this.previous.minus(e-1)}},{key:"plus",value:function(e){return 0===e?this:this.next.plus(e-1)}},{key:"isBefore",value:function(e){return this.year<e.year||this.year===e.year&&this.month<e.month}},{key:"toString",value:function(){return k()([this.year,this.month-1,1]).format("YYYY/MM")}}],[{key:"current",get:function(){var t=k()();return new e(t.year(),t.month()+1)}},{key:"nextMonths",value:function(t,n){if(0===n)return[];var r=t.next;return[r].concat(Object(he.a)(e.nextMonths(r,n-1)))}},{key:"previousMonths",value:function(t,n){if(0===n)return[];var r=t.previous;return[].concat(Object(he.a)(e.previousMonths(r,n-1)),[r])}}]),e}();var yn,kn=function(e){var t=(e.authentication.user||{}).name,n=e.workLog.workLogs;if(!n)return{};var r=n.filter((function(e){return e.employee===t})).map((function(e){return{day:e.day,workload:e.workload}}));return Object(Be.a)({},t,r)},wn=function(e){var t=new Map;return Object(Oe.forEach)(e,(function(e,n){e&&e.forEach((function(e){t.set(e,Object(Oe.union)(t.get(e),[n]))}))})),t}(ht.a),_n=function(){var e=Object(h.c)((function(e){return e.registration.presets})),t=Object(h.c)((function(e){return e.workLog.tags})),n=Object(h.c)((function(e){return e.calendar.days})),a=Object(h.c)(xe),c=Object(h.c)(kn),o=Object(h.c)((function(e){var t=e.registration.workLog;return new Ot(t.expression,t.days,t.tags,t.workload)})),i=Object(h.b)();Object(r.useEffect)((function(){i(zt()),i(Ft()),i(xn())}),[i]);return Object(oe.jsxs)("div",{className:"registration-page",children:[Object(oe.jsxs)("div",{className:"registration-page__header",children:[Object(oe.jsx)("span",{children:"Report your time"})," using our expression language, to make it quick!",Object(oe.jsx)(Zt,{})]}),Object(oe.jsx)(Le.a,{variant:"fullWidth"}),Object(oe.jsx)("div",{className:"registration-page__input",children:Object(oe.jsx)(Ut,{onChange:function(e){return i(Vt(e))},onSave:function(e){return i(Jt(e))},workLog:o,tags:t,presets:e,autoAddedTagsMapping:wn})}),Object(oe.jsx)("div",{children:n&&!Object(Oe.isEmpty)(c)?Object(oe.jsx)(gn,{selectedMonth:new vn(a.year,a.month),selectedDays:o.days,days:n,workLogs:c,onChange:function(e){return i(Gt(e.year,e.month))},onDaysSelected:function(e){return i(Vt(o.withDays(e)))}}):"Loading..."})]})},Nn=function(){return Object(oe.jsx)("div",{children:"Settings page desktop"})},Cn=n(590),En=n(159),An=n.n(En),Sn=n(160),Ln=n.n(Sn),Tn=(n(499),function(e){var t=e.selectedDay,n=e.onChange,r=k()(t,"YYYY/MM/DD"),a=r.isSame(k()(),"day")?" (today)":"";return Object(oe.jsxs)("div",{className:"day-selector",children:[Object(oe.jsx)("div",{className:"day-selector__name",children:r.format("dddd")+a}),Object(oe.jsxs)("div",{className:"day-selector__selector selector",children:[Object(oe.jsx)(Cn.a,{"aria-label":"Previous",onClick:function(){return n(r.subtract(1,"days").format("YYYY/MM/DD"))},"data-testid":"day-selector-previous",children:Object(oe.jsx)(An.a,{})}),Object(oe.jsx)("div",{className:"selector__date",children:r.format("DD.MM.YYYY")}),Object(oe.jsx)(Cn.a,{"aria-label":"Next",onClick:function(){return n(r.add(1,"days").format("YYYY/MM/DD"))},"data-testid":"day-selector-next",children:Object(oe.jsx)(Ln.a,{})})]})]})}),Dn=(n(500),n(574)),Rn=n(591),In=n(521),Mn=n(618),Wn=(n(501),function(e){var t=e.onDelete,n=e.workLog,r=e.size;return Object(oe.jsx)(Mn.a,{"data-testid":"work-log",className:"big"===r?"work-log work-log--big":"work-log",onDelete:t?function(){return t(n.id)}:void 0,label:Object(oe.jsx)(Pn,{projectNames:n.projectNames,workload:n.workload})})}),Pn=function(e){var t=e.projectNames,n=e.workload;return Object(oe.jsxs)("div",{className:"chip-label",children:[Object(oe.jsx)("div",{className:"chip-label__projects","data-testid":"chip-label",children:t.join(", ")}),Object(oe.jsx)("div",{className:"chip-label__workload","data-testid":"chip-workload",children:cn(n)})]})},Yn=function(e){var t=e.workLogs,n=e.onDelete;return Object(oe.jsxs)(Dn.a,{className:"work-logs",children:[Object(oe.jsx)(Rn.a,{className:"work-logs__title",children:"Reported time"}),t.sort((function(e,t){return t.workload-e.workload})).map((function(e){return Object(oe.jsx)(In.a,{children:Object(oe.jsx)(Wn,{onDelete:n,workLog:e,size:"big"})},e.id)}))]})},Un=n(608),zn=n(592),Gn=n(619),Fn=(n(502),function(e){var t=e.hours,n=e.minutes,r=e.onHoursChange,a=e.onMinutesChange;return Object(oe.jsxs)("div",{className:"workload-selector","data-testid":"workload-selector",children:[Object(oe.jsxs)("div",{"data-testid":"number-of-hours",children:[t," ",1===t?"hour":"hours"]}),Object(oe.jsx)(Gn.a,{min:0,max:16,step:1,value:t,onChange:function(e,t){return r(t)},className:"workload-selector__slider slider","data-testid":"hours-slider"}),Object(oe.jsxs)("div",{"data-testid":"number-of-minutes",children:[n," minutes"]}),Object(oe.jsx)(Gn.a,{min:0,max:60,step:15,value:n,onChange:function(e,t){return a(t)},className:"workload-selector__slider slider","data-testid":"minutes-slider"})]})});!function(e){e[e.TAGS=0]="TAGS",e[e.WORKLOAD=1]="WORKLOAD"}(yn||(yn={}));var Bn,Hn=function(e){return Object(Oe.isEmpty)(Object(Oe.trim)(e))?"Description cannot be empty":e.length>1e3?"Description cannot be longer than 1000 characters":void 0},qn=function(e){var t=e.open,n=e.onCancel,a=e.onSave,c=e.tags,o=void 0===c?[]:c,i=e.selectedTags,s=Object(r.useState)([]),u=Object(se.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)(yn.TAGS),b=Object(se.a)(j,2),h=b[0],O=b[1],p=Object(r.useState)(8),f=Object(se.a)(p,2),g=f[0],x=f[1],m=Object(r.useState)(0),v=Object(se.a)(m,2),y=v[0],k=v[1],w=Object(r.useState)(""),_=Object(se.a)(w,2),N=_[0],C=_[1],E=Object(r.useState)(void 0),A=Object(se.a)(E,2),S=A[0],L=A[1];Object(r.useEffect)((function(){i&&(d(i),O(yn.WORKLOAD))}),[i]);var T=cn(60*g+y),D=Object(Oe.sortBy)(Object(Oe.uniq)(o.map(Oe.trim))),R=l.includes("self-dev"),I=function(){n(),d([]),O(yn.TAGS),x(8),k(0),C(""),L(void 0)};return Object(oe.jsxs)($e.a,{open:t,onClose:I,fullWidth:!0,children:[Object(oe.jsx)(Xe.a,{children:"Create Work Log"}),Object(oe.jsxs)(et.a,{children:[h===yn.TAGS&&Object(oe.jsx)(Kn,{tags:D,selected:l,onClick:function(e){return d(Object(Oe.xor)(l,[e]))}}),h===yn.WORKLOAD&&Object(oe.jsx)(Fn,{hours:g,minutes:y,onHoursChange:function(e){return x(e)},onMinutesChange:function(e){return k(e)}}),h===yn.WORKLOAD&&R&&Object(oe.jsx)(Dt.a,{"aria-label":"self-dev description",label:"Self-dev description",multiline:!0,type:"text",value:N,onChange:function(e){return t=e.target.value,L(Hn(t)),void C(t);var t},size:"medium",error:!!S,helperText:S,fullWidth:!0})]}),Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:I,children:"Cancel"}),h===yn.TAGS&&Object(oe.jsx)(nt.a,{onClick:function(){return O(yn.WORKLOAD)},disabled:Object(Oe.isEmpty)(l),color:"primary",autoFocus:!0,children:"Next"}),h===yn.WORKLOAD&&Object(oe.jsx)(nt.a,{onClick:function(){var e=R?Hn(N):void 0;e?L(e):(a(l,T,R?Object(Oe.trim)(N):void 0),I())},color:"primary",autoFocus:!0,children:"Save"})]})]})},Kn=function(e){var t=e.tags,n=e.selected,r=e.onClick;return Object(oe.jsx)(Dn.a,{children:t.map((function(e){return Object(oe.jsxs)(In.a,{dense:!0,button:!0,role:void 0,onClick:function(){return r(e)},"data-tag":e,"data-testid":"tag",children:[Object(oe.jsx)(Un.a,{checked:Object(Oe.includes)(n,e),color:"primary",tabIndex:-1,disableRipple:!0}),Object(oe.jsx)(zn.a,{primary:e})]},e)}))})},Vn=n(161),Jn=n.n(Vn),Zn=(n(503),function(){var e=Object(r.useState)(void 0),t=Object(se.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),o=Object(se.a)(c,2),i=o[0],s=o[1],u=Object(h.c)((function(e){return e.registration.presets})),l=Object(h.c)((function(e){return e.workLog.tags})),d=Object(h.c)((function(e){return e.workLog.workLogs.filter(function(e){return function(t){return t.day===e.registration.workLog.days[0]}}(e)).filter(function(e){return function(t){return t.employee===e.authentication.user.name}}(e))})),j=Object(h.c)((function(e){var t=e.registration.workLog,n=t.expression,r=t.workload,a=t.days,c=t.tags;return new Ot(n,a,c,r)})),b=Object(h.b)();Object(r.useEffect)((function(){b({type:W}),b(Ft(6)),b(xn())}),[b]);var O=j.days[0],p=function(){s(!1),a(void 0)};return Object(oe.jsxs)("div",{className:"registration-page-mobile",children:[Object(oe.jsx)(Tn,{selectedDay:O,onChange:function(e){return b(Vt(j.withDays([e])))}}),Object(oe.jsx)(Yn,{workLogs:d,onDelete:function(e){return b(Ht(e))}}),Object(oe.jsx)("div",{className:"presets-selector",children:Object(oe.jsxs)(Dn.a,{className:"presets-selector__list",children:[Object(oe.jsx)(Rn.a,{className:"presets-selector__title",children:"Suggested projects"}),u.map((function(e,t){return Object(oe.jsx)(Mn.a,{label:e.tags.join(", "),onClick:function(){return a(e)},className:"presets-selector__chip chip",color:"primary","data-testid":"preset"},t)}))]})}),Object(oe.jsx)(qn,{onSave:function(e,t,n){var r=Ot.from(e,O,t);b(Jt(r.withNote(n))),p()},onCancel:p,open:i||!Object(Oe.isNil)(n),selectedTags:null===n||void 0===n?void 0:n.tags,tags:l}),Object(oe.jsx)(Cn.a,{onClick:function(){return s(!0)},color:"primary",className:"registration-page-mobile__add-button add-button","data-testid":"custom-work-log-button",children:Object(oe.jsx)(Jn.a,{})})]})}),Qn=function(){return Object(oe.jsx)("div",{children:"Settings mobile page"})},$n=(n(504),function e(t){Object(g.a)(this,e),this.id=void 0,this.employee=void 0,this.projectNames=void 0,this.day=void 0,this.workload=void 0,this.id=t.id,this.employee=t.employee,this.projectNames=t.projectNames,this.day=t.day,this.workload=t.workload}),Xn=n(303),er=n.n(Xn),tr=n(304),nr=n.n(tr),rr=n(162),ar=n.n(rr),cr=n(163),or=n.n(cr),ir=(n(505),n(506),n(507),["classes","inputRef","ref"]),sr=function(e,t){var n=t.query,r=t.isHighlighted;return Object(oe.jsx)(kt,{isHighlighted:r,query:n,suggestion:e})},ur=function(e){e.classes;var t=e.inputRef,n=void 0===t?function(){}:t,r=e.ref,a=Object(qe.a)(e,ir);return Object(oe.jsx)(Dt.a,Object(He.a)(Object(He.a)({fullWidth:!0,InputProps:{inputRef:function(e){r(e),n(e)}}},a),{},{"data-testid":"edit-project"}))},lr=function(e){var t=e.value,n=e.tags,a=e.label,c=void 0===a?"Projects":a,o=e.className,i=void 0===o?"text-field":o,s=e.onChange,u=Object(r.useState)([]),l=Object(se.a)(u,2),d=l[0],j=l[1];return Object(oe.jsx)("div",{className:"tags-autocomplete",children:Object(oe.jsx)(gt.a,{renderInputComponent:ur,getSuggestionValue:function(e){return e.value},inputProps:{className:i,value:t,label:c,onChange:function(e,t){var n=t.newValue;return s(n)}},onSuggestionsFetchRequested:function(e){var t=e.value;return j(function(e){var t=Object(Oe.last)(e.split(",").map((function(e){return e.trim()})));return n.filter((function(e){return Object(Oe.startsWith)(e.toLowerCase(),t)})).slice(0,5).map((function(e){return e.trim()})).sort().map((function(n){return{label:n,value:e.replace(new RegExp("".concat(t,"$")),"".concat(n,", "))}}))}(t))},onSuggestionsClearRequested:function(){return j([])},renderSuggestion:sr,renderSuggestionsContainer:function(e){return Object(oe.jsx)(Ke.a,Object(He.a)(Object(He.a)({},e.containerProps),{},{children:e.children}))},suggestions:d})})},dr=function(e){var t=e.workLog,n=e.open,a=e.onClose,c=e.tags,o=Object(r.useState)(""),i=Object(se.a)(o,2),s=i[0],u=i[1],l=Object(r.useState)(""),d=Object(se.a)(l,2),j=d[0],b=d[1];Object(r.useEffect)((function(){var e=t||{},n=e.projectNames,r=void 0===n?[]:n,a=e.workload;b(r.join(", ")),u(cn(a))}),[t]);var h=t||{},O=h.employee,p=void 0===O?"":O,f=h.day,g=void 0===f?"":f;return Object(oe.jsxs)($e.a,{open:n,onClose:function(){return a()},className:"edit-work-log",children:[Object(oe.jsx)(Xe.a,{children:"Edit worklog entry"}),Object(oe.jsxs)(et.a,{className:"edit-work-log__content content","data-testid":"edit-work-log-dialog-content",children:[Object(oe.jsx)(Dt.a,{className:"text-field",label:"Workload",value:s,onChange:function(e){return u(e.target.value)},"data-testid":"edit-workload"}),Object(oe.jsx)(lr,{value:j,tags:c,onChange:function(e){return b(e)}}),Object(oe.jsx)(Dt.a,{className:"text-field",label:"Employee",value:p,disabled:!0,"data-testid":"edit-employee"}),Object(oe.jsx)(Dt.a,{className:"text-field",label:"Date",value:g,disabled:!0,"data-testid":"edit-date"})]}),Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:function(){return a()},children:"Cancel"}),Object(oe.jsx)(nt.a,{onClick:function(){var e=j.split(",").map(Oe.trim).filter((function(e){return!Object(Oe.isEmpty)(e)}));a({id:t.id,workload:s,projectNames:e})},color:"primary",autoFocus:!0,children:"Update"})]})]})},jr=function(e){var t=e.workLogs,n=e.tags,a=e.onEditWorkLog,c=e.onRemoveWorkLog,o=e.username,i=Object(r.useState)(void 0),s=Object(se.a)(i,2),u=s[0],l=s[1],d=Object(Oe.groupBy)(t,(function(e){return e.day})),j=Object(Oe.keys)(d),b=function(e,t,n,r,a){return n.map((function(i,s){return Object(oe.jsx)(br,{day:r+s===0?{text:e,rowSpan:a}:void 0,employee:0===s?{text:t,rowSpan:Object(Oe.size)(n)}:void 0,username:o,workLog:i,onEdit:function(){return function(e){return l(e)}(i)},onRemove:function(){return c(i.id)}},"".concat(e,"-").concat(t,"-").concat(s))}))};return Object(oe.jsxs)("div",{className:"table-report","data-testid":"table-report",children:[Object(oe.jsx)(dr,{workLog:u,tags:n,onClose:function(e){l(void 0),e&&a(e)},open:void 0!==u}),Object(oe.jsxs)(Qt.a,{className:"table-report__table table",children:[Object(oe.jsx)($t.a,{children:Object(oe.jsxs)(en.a,{children:[Object(oe.jsx)(tn.a,{children:"Date"}),Object(oe.jsx)(tn.a,{children:"Employee"}),Object(oe.jsx)(tn.a,{children:"Workload"}),Object(oe.jsx)(tn.a,{children:"Project"}),Object(oe.jsx)(tn.a,{padding:"checkbox"}),Object(oe.jsx)(tn.a,{padding:"checkbox"})]})}),Object(oe.jsx)(Xt.a,{children:Object(Oe.chain)(j).reverse().map((function(e){return function(e,t){var n=Object(Oe.groupBy)(t,(function(e){return e.employee})),r=Object(Oe.keys)(n),a=Object(Oe.size)(t);return Object(Oe.chain)(r).map((function(t,r){return b(e,t,n[t],r,a)})).flatten().value()}(e,d[e])})).flatten().value()})]})]})},br=function(e){var t=e.day,n=e.employee,r=e.workLog,a=e.username,c=e.onEdit,o=e.onRemove;return Object(oe.jsxs)(en.a,{"data-testid":"table-report-row",children:[t&&Object(oe.jsx)(tn.a,{rowSpan:t.rowSpan,"data-testid":"day-cell",children:t.text}),n&&Object(oe.jsx)(tn.a,{rowSpan:n.rowSpan,"data-testid":"employee-cell",children:n.text}),Object(oe.jsx)(tn.a,{"data-testid":"workload-cell",children:cn(r.workload)}),Object(oe.jsx)(tn.a,{"data-testid":"tags-cell",children:r.projectNames.join(", ")}),Object(oe.jsx)(tn.a,{padding:"checkbox",children:a===r.employee&&Object(oe.jsx)(nt.a,{onClick:c,"data-testid":"edit-button",children:Object(oe.jsx)(ar.a,{})})}),Object(oe.jsx)(tn.a,{padding:"checkbox",children:a===r.employee&&Object(oe.jsx)(nt.a,{onClick:o,"data-testid":"remove-button",children:Object(oe.jsx)(or.a,{})})})]})},hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(g.a)(this,e),this.query=t,this.expression=n}return Object(x.a)(e,[{key:"encodedQuery",get:function(){return this.query.replace(/#/g,"!project=").replace(/\*/g,"!employee=").replace(/@/g,"!date=").replace(/\s/g,"+").replace(/\//g,":")}}],[{key:"fromSelection",value:function(t,n,r){return new e(["@".concat(r.toString()),t.map((function(e){return"#".concat(e)})).join(" "),n.map((function(e){return"*".concat(e)})).join(" ")].join(" "))}}]),e}(),Or=(n(508),n(509),function(e){var t,n=e.entriesAffected,r=e.className;return Object(oe.jsx)("div",{className:r?" ".concat(r," bulk-edit-hint"):"bulk-edit-hint","data-hint-text":!0,children:Object(Oe.isNil)(n)?"Query is being validated...":(t=n,0===t?Object(oe.jsxs)("div",{children:["Hint: ",Object(oe.jsx)("span",{className:"number-of-entries",children:"No "}),"worklog entries will be affected by this operation."]}):1===t?Object(oe.jsxs)("div",{children:["Hint: ",Object(oe.jsx)("span",{className:"number-of-entries",children:"1 "}),"worklog entry will be affected by this operation."]}):Object(oe.jsxs)("div",{children:["Hint: ",Object(oe.jsxs)("span",{className:"number-of-entries",children:[t," "]}),"worklog entries will be affected by this operation."]}))})}),pr=function(e){var t=e.username,n=e.selection,a=e.userTags,c=e.onEdit,o=Object(r.useState)(!1),i=Object(se.a)(o,2),s=i[0],u=i[1],l=Object(r.useState)(new hr),d=Object(se.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(void 0),O=Object(se.a)(h,2),p=O[0],f=O[1],g=hr.fromSelection(n.tags?n.tags:a,n.employees?n.employees:[t],new vn(n.month.year,n.month.month)),x=function(e){S.validateBulkEditQuery(e.encodedQuery).then((function(e){return f(e.entriesAffected)}))},m=function(){return u(!1)};return Object(oe.jsxs)("div",{children:[Object(oe.jsxs)(nt.a,{onClick:function(){b(g),u(!0),x(g)},children:[Object(oe.jsx)(ar.a,{}),"Bulk edit"]}),Object(oe.jsxs)($e.a,{open:s,onClose:m,className:"bulk-edit",classes:{paper:"max-width: 40em"},children:[Object(oe.jsx)(Xe.a,{children:"Bulk edit"}),Object(oe.jsxs)(et.a,{className:"bulk-edit__content content",children:[Object(oe.jsx)(Dt.a,{className:"text-field",label:"Query",value:j.query,onChange:function(e){var t=new hr(e.target.value,j.expression);f(void 0),b(t),x(t)},"data-testid":"bulk-edit-query"}),Object(oe.jsx)(Dt.a,{className:"text-field",label:"Expression",placeholder:"-#vacation to remove and +#sick to add tag",value:j.expression,onChange:function(e){b(new hr(j.query,e.target.value))},"data-testid":"bulk-edit-expression"})]}),Object(oe.jsx)(Or,{entriesAffected:p,className:"content__hint"}),Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:m,children:"Cancel"}),Object(oe.jsx)(nt.a,{color:"primary",onClick:function(){c({query:j.query,expression:j.expression}),m()},children:"Update"})]})]})]})},fr=(n(510),function(e){var t=e.workLogs,n=void 0===t?[]:t,r=Object(Oe.sum)(n.map((function(e){return e.workload}))),a=Object(Oe.chain)(n).map((function(e){return e.projectNames.map((function(t){return{project:t,workload:e.workload}}))})).flatten().groupBy((function(e){return e.project})).toPairs().map((function(e){return{project:e[0],workload:Object(Oe.sum)(e[1].map((function(e){return e.workload})))}})).map((function(e){return{project:e.project,workload:e.workload,share:e.workload/r}})).sortBy((function(e){return e.project})).value();return Object(oe.jsx)("div",{className:"projects-report","data-testid":"projects-report",children:Object(oe.jsxs)(Qt.a,{className:"projects-report__table table",children:[Object(oe.jsx)($t.a,{children:Object(oe.jsxs)(en.a,{children:[Object(oe.jsx)(tn.a,{children:"Project"}),Object(oe.jsx)(tn.a,{children:"Workload"}),Object(oe.jsx)(tn.a,{children:"Share"})]})}),Object(oe.jsx)(Xt.a,{children:a.map((function(e,t){return Object(oe.jsxs)(en.a,{children:[Object(oe.jsx)(tn.a,{"data-testid":"project-cell",children:e.project}),Object(oe.jsx)(tn.a,{"data-testid":"workload-cell",children:cn(e.workload)}),Object(oe.jsxs)(tn.a,{"data-testid":"share-cell",children:[(100*e.share).toFixed(2),"%"]})]},t)}))})]})})}),gr=n(298),xr=n.n(gr),mr=n(299),vr=n.n(mr),yr=(n(511),function(e){var t=e.month,n=e.isSelected,r=e.onClick;return Object(oe.jsx)(Mn.a,{label:t.toString(),color:"primary",variant:n?"default":"outlined",className:"chip",onClick:r,"data-testid":"month-chip","data-chip-selected":n})}),kr=function(e){var t=e.selectedMonth,n=e.onMonthChange,a=Object(r.useState)(0),c=Object(se.a)(a,2),o=c[0],i=c[1],s=vn.current.range(3,1).map((function(e){return o>0?e.plus(o):e.minus(-o)}));return Object(oe.jsxs)("div",{className:"month-selector","data-testid":"months-selector",children:[Object(oe.jsx)("div",{className:"month-selector__header",children:"Month"}),Object(oe.jsxs)("div",{className:"month-selector__months",children:[Object(oe.jsx)(nt.a,{onClick:function(){return i(o-1)},"data-testid":"prev-months-button",children:Object(oe.jsx)(xr.a,{})}),s.map((function(e,r){return Object(oe.jsx)(yr,{month:e,isSelected:new vn(t.year,t.month).toString()===e.toString(),onClick:function(){return n(e.year,e.month)}},r)})),Object(oe.jsx)(nt.a,{onClick:function(){return i(o+1)},"data-testid":"next-months-button",children:Object(oe.jsx)(vr.a,{})})]})]})},wr=n(302),_r=n.n(wr),Nr=n(300),Cr=n.n(Nr),Er=n(301),Ar=n.n(Er),Sr=function(e){var t=e.label,n=e.workload;return Object(oe.jsxs)("div",{className:"chip-content",children:[Object(oe.jsx)("div",{className:"chip-content__label","data-testid":"selector-chip-label",children:t}),n>0&&Object(oe.jsx)("div",{className:"chip-content__workload",children:cn(n)})]})},Lr=function(e){var t=e.label,n=e.workload,r=e.selected,a=e.onClick;return Object(oe.jsx)(Mn.a,{label:Object(oe.jsx)(Sr,{label:t,workload:n}),color:"primary",className:"chip",variant:r?"default":"outlined",onClick:a,"data-testid":"selector-chip","data-chip-selected":r})},Tr=(n(512),function(e){var t=e.hideIneligible,n=e.selected,a=void 0===n?[]:n,c=e.workLogs,o=e.chipLabel,i=e.workLogFilter,s=void 0===i?function(){return!0}:i,u=e.onSelectionChange,l=e.title,d=Object(r.useState)(t),j=Object(se.a)(d,2),b=j[0],h=j[1],O=Object(Oe.uniq)(c.filter((function(e){return!b||s(e)})).map(o).map((function(e){return Array.isArray(e)?e:[e]})).reduce((function(e,t){return[].concat(Object(he.a)(e),Object(he.a)(t))}),[])).sort();return Object(oe.jsxs)("div",{className:"work-log-selector",children:[Object(oe.jsx)("div",{className:"work-log-selector__header",children:l}),Object(oe.jsx)("div",{className:"work-log-selector__chips",children:O.map((function(e,t){var n=c.filter((function(t){return o(t)===e||o(t).includes(e)})).filter(s).map((function(e){return e.workload})).reduce((function(e,t){return e+t}),0);return Object(oe.jsx)(Lr,{label:e,workload:n,selected:a.includes(e),onClick:function(){return u(Object(Oe.xor)(a,[e]))}},t)}))}),Object(oe.jsxs)("div",{className:"work-log-selector__footer",children:[Object(oe.jsxs)(nt.a,{size:"small",onClick:function(){return h(!b)},children:[t?Object(oe.jsx)(Cr.a,{}):Object(oe.jsx)(Ar.a,{}),t?"Show ineligible":"Hide ineligible"]}),Object(oe.jsxs)(nt.a,{size:"small",onClick:function(){return u([])},children:[Object(oe.jsx)(_r.a,{}),"None"]}),Object(oe.jsxs)(nt.a,{size:"small",onClick:function(){return u(O)},children:[Object(oe.jsx)(Jn.a,{}),"All"]})]})]})}),Dr=(n(513),function(e){var t=e.workLogs,n=e.selection,r=e.onTagsChange,a=e.onEmployeesChange,c=e.onMonthChange,o=e.employeesFilter,i=e.tagsFilter;return Object(oe.jsxs)("div",{className:"reporting-filters",children:[Object(oe.jsx)("div",{children:Object(oe.jsx)(kr,{selectedMonth:n.month,onMonthChange:c})}),Object(oe.jsx)("div",{"data-testid":"projects-selector",children:Object(oe.jsx)(Tr,{title:"Projects",chipLabel:function(e){return e.projectNames},workLogs:t,selected:n.tags,workLogFilter:o,onSelectionChange:r})}),Object(oe.jsx)("div",{"data-testid":"employees-selector",children:Object(oe.jsx)(Tr,{title:"Employees",chipLabel:function(e){return e.employee},workLogs:t,selected:n.employees,hideIneligible:!0,workLogFilter:i,onSelectionChange:a})})]})}),Rr=function(e){return function(t){return Object(Oe.includes)(e,t.employee)}},Ir=function(e){return function(t){return!Object(Oe.isEmpty)(Object(Oe.intersection)(e,t.projectNames))}},Mr=function(e){var t,n=e.days,a=e.tags,c=e.username,o=e.onRemoveWorkLog,i=e.onEditWorkLog,s=e.workLogs,u=e.selection;!function(e){e[e.CALENDAR=0]="CALENDAR",e[e.TABLE=1]="TABLE",e[e.PROJECTS=2]="PROJECTS"}(t||(t={}));var l=Object(r.useState)(t.CALENDAR),d=Object(se.a)(l,2),j=d[0],b=d[1],h=Object(Oe.chain)(s).filter(Rr(u.employees)).groupBy((function(e){return e.employee})).mapValues((function(e){return e.filter(Ir(u.tags)).map((function(e){return{day:e.day,workload:e.workload}}))})).value(),O=s.filter(Rr(u.employees)).filter(Ir(u.tags));return Object(oe.jsxs)(Ke.a,{className:"reporting-page__report report",children:[Object(oe.jsxs)(me.a,{value:j,onChange:function(){},variant:"fullWidth",indicatorColor:"primary",textColor:"primary",className:"report__tabs",children:[Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(er.a,{}),onClick:function(){return b(t.CALENDAR)},"data-testid":"calendar-tab"}),Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(nr.a,{}),onClick:function(){return b(t.TABLE)},"data-testid":"table-tab"}),Object(oe.jsx)(ve.a,{icon:Object(oe.jsx)(_e.a,{}),onClick:function(){return b(t.PROJECTS)},"data-testid":"projects-tab"})]}),j===t.CALENDAR&&Object(oe.jsx)(bn,{days:n,workLogs:h}),j===t.TABLE&&Object(oe.jsx)(jr,{workLogs:O,tags:a,onRemoveWorkLog:o,onEditWorkLog:i,username:c}),j===t.PROJECTS&&Object(oe.jsx)(fr,{workLogs:O})]})},Wr=function(){var e=Object(r.useState)(void 0),t=Object(se.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(void 0),o=Object(se.a)(c,2),i=o[0],s=o[1],u=Object(h.c)((function(e){return e.calendar.days||[]})),l=Object(h.c)((function(e){return e.workLog.tags||[]})),d=Object(h.c)(pe),j=Object(h.c)(fe),b=Object(h.c)((function(e){return e.workLog.workLogs||[]})),O=Object(h.c)(xe),p=Object(h.b)();Object(r.useEffect)((function(){p(zt()),p(Ft())}),[p]);var f={tags:i||d,employees:n||[j],month:O};return Object(oe.jsxs)("div",{className:"reporting-page",children:[Object(oe.jsxs)("div",{className:"reporting-page__header header",children:[Object(oe.jsxs)("div",{className:"header__text",children:[Object(oe.jsx)("span",{children:"Review reports"})," by month, project and employee"]}),Object(oe.jsx)(pr,{username:j,selection:f,userTags:d,onEdit:function(e){return p({type:q,payload:e})}})]}),Object(oe.jsx)(Le.a,{variant:"fullWidth"}),Object(oe.jsx)("div",{className:"reporting-page__filters",children:Object(oe.jsx)(Dr,{workLogs:b.map((function(e){return new $n(e)})),onTagsChange:function(e){return s(e)},onEmployeesChange:function(e){return a(e)},onMonthChange:function(e,t){return p(Gt(e,t))},selection:f,employeesFilter:Rr(f.employees),tagsFilter:Ir(f.tags)})}),Object(oe.jsx)(Mr,{days:u,tags:l,username:j,selection:f,workLogs:b,onRemoveWorkLog:function(e){return p(Ht(e))},onEditWorkLog:function(e){return p(function(e,t,n){return{type:G,payload:{id:e,tags:t,workload:n}}}(e.id,e.projectNames,e.workload))}})]})},Pr=n(612),Yr=n(609);!function(e){e.INFO="INFO",e.ERROR="ERROR"}(Bn||(Bn={}));var Ur=function(){function e(t,n){Object(g.a)(this,e),this.message=t,this.type=n,this.id=void 0,this.id=Object(Yr.a)()}return Object(x.a)(e,null,[{key:"info",value:function(t){return new e(t,Bn.INFO)}},{key:"error",value:function(t){return new e(t,Bn.ERROR)}}]),e}();var zr=function(e){return{type:$,payload:Ur.info(e)}},Gr=function(e){return{type:$,payload:Ur.error(e)}},Fr=function(){var e=Object(h.c)((function(e){return e.notifications.notifications})),t=Object(h.b)(),n=function(e){return t(function(e){return{type:X,payload:e}}(e))};return Object(oe.jsx)("div",{children:e.map((function(e,t){return Object(oe.jsx)(Pr.a,{open:!0,onClose:function(){return n(e.id)},message:e.message,anchorOrigin:{vertical:"bottom",horizontal:"right"},"data-testid":"snackbar"},t)}))})},Br=n(594),Hr=n(593),qr=n(595),Kr=n(596),Vr=(n(514),function(){return Object(oe.jsx)("div",{className:"card-content__reminder",children:"You should report work time for this day!"})}),Jr=function(e){var t=e.workLogs;return Object(oe.jsx)(Dn.a,{"data-testid":"day-card-list",children:t.map((function(e,t){return Object(oe.jsx)(In.a,{children:Object(oe.jsx)(Wn,{workLog:e})},t)}))})},Zr=function(e){var t=e.weekend,n=e.workLogs,r=e.pastDate;return Object(oe.jsx)(Hr.a,{className:"day-card__card-content card-content",children:r&&Object(Oe.isEmpty)(n)&&!t?Object(oe.jsx)(Vr,{}):Object(oe.jsx)(Jr,{workLogs:n})})},Qr=function(e){var t=e.day,n=e.onEditClick,r=e.weekend,a=e.workLogs,c=k()(t,"YYYY/MM/DD").isBefore(k()(),"day"),o=c&&!r||!Object(Oe.isEmpty)(a);return Object(oe.jsxs)(Br.a,{className:"day-card","data-testid":"day-card",children:[Object(oe.jsx)(qr.a,{title:t,subheader:k()(t,"YYYY/MM/DD").format("dddd"),"data-testid":"day-card-day"}),o&&Object(oe.jsx)(Zr,{weekend:r,workLogs:a,pastDate:c}),Object(oe.jsx)(Kr.a,{className:"day-card__actions",children:Object(oe.jsx)(nt.a,{size:"small",onClick:n,children:"Edit"})})]})},$r=(n(515),function(e){var t=e.selectedMonth,n=e.onChange;return Object(oe.jsxs)("div",{className:"reporting-month-selector","data-testid":"month-selector",children:[Object(oe.jsx)(Cn.a,{"aria-label":"Previous","data-testid":"month-selector-previous",onClick:function(){return n(t.minus(1))},children:Object(oe.jsx)(An.a,{})}),Object(oe.jsx)("div",{className:"reporting-month-selector__date",children:t.toString()}),Object(oe.jsx)(Cn.a,{"aria-label":"Next","data-testid":"month-selector-next",onClick:function(){return n(t.plus(1))},children:Object(oe.jsx)(Ln.a,{})})]})}),Xr=(n(516),Object(b.i)((function(e){var t=e.history,n=Object(h.c)((function(e){return e.calendar})),a=n.selectedMonth,c=n.days,o=void 0===c?[]:c,i=Object(h.c)((function(e){return e.workLog.workLogs.filter((function(t){return t.employee===e.authentication.user.name}))})),s=Object(h.b)();Object(r.useEffect)((function(){s(zt())}),[s]);var u=Object(Oe.groupBy)(i,(function(e){return e.day})),l=o.sort((function(e,t){return t.id.localeCompare(e.id)})).map((function(e){return{day:e.id,weekend:e.weekend,workLogs:u[e.id]||[]}})).filter((function(e){return e.workLogs.length>0}));return Object(oe.jsxs)("div",{className:"reporting-page-mobile",children:[Object(oe.jsx)($r,{selectedMonth:new vn(a.year,a.month),onChange:function(e){return s(Gt(e.year,e.month))}}),Object(oe.jsx)("div",{className:"reporting-page-mobile__days-list days-list",children:l.map((function(e){return Object(oe.jsx)(Qr,{day:e.day,weekend:e.weekend,workLogs:e.workLogs,onEditClick:function(){return function(e){s(Vt(Ot.empty().withDays([e]))),t.push("/registration")}(e.day)}},e.day)}))})]})}))),ea=(n(517),function(e){var t=e.accounts,n=e.username,r=e.onDelete;return Object(oe.jsxs)(Qt.a,{children:[Object(oe.jsx)($t.a,{children:Object(oe.jsxs)(en.a,{children:[Object(oe.jsx)(tn.a,{children:"Account Name"}),Object(oe.jsx)(tn.a,{children:"Client ID"}),Object(oe.jsx)(tn.a,{children:"Owner"}),Object(oe.jsx)(tn.a,{})]})}),Object(oe.jsx)(Xt.a,{children:t.map((function(e){return Object(oe.jsx)(ta,{account:e,username:n,onDelete:r},e.clientID)}))})]})}),ta=function(e){var t=e.account,n=e.username,r=e.onDelete;return Object(oe.jsxs)(en.a,{"data-testid":"service-account-row",children:[Object(oe.jsx)(tn.a,{children:t.name}),Object(oe.jsx)(tn.a,{children:t.clientID}),Object(oe.jsx)(tn.a,{children:t.owner}),Object(oe.jsx)(tn.a,{children:n===t.owner&&Object(oe.jsx)(nt.a,{onClick:function(){return r(t.clientID)},"data-testid":"delete-account-button",children:Object(oe.jsx)(or.a,{})})})]})},na=function(){return{type:ee}},ra=function(e){var t=e.users;return Object(oe.jsxs)(Qt.a,{children:[Object(oe.jsx)($t.a,{children:Object(oe.jsxs)(en.a,{children:[Object(oe.jsx)(tn.a,{children:"Name"}),Object(oe.jsx)(tn.a,{children:"Email"}),Object(oe.jsx)(tn.a,{children:"Roles"})]})}),Object(oe.jsx)(Xt.a,{children:t.map((function(e){return Object(oe.jsx)(aa,{user:e},e.name)}))})]})},aa=function(e){var t=e.user;return Object(oe.jsxs)(en.a,{"data-testid":"authorized-user-row",children:[Object(oe.jsx)(tn.a,{children:t.name}),Object(oe.jsx)(tn.a,{children:t.email}),Object(oe.jsx)(tn.a,{children:t.roles.join(", ")})]})},ca=function(e){var t=e.name,n=e.clientID,r=e.secret;return Object(oe.jsxs)(et.a,{className:"service-account-dialog__content content",children:[Object(oe.jsxs)("div",{children:["Your account ",Object(oe.jsx)("b",{children:t})," has been created."]}),Object(oe.jsx)("div",{children:"Copy credentials from fields below."}),Object(oe.jsx)(Dt.a,{label:"Client ID",className:"content__text-field",value:n,margin:"normal",InputProps:{readOnly:!0},type:"text",fullWidth:!0}),Object(oe.jsx)(Dt.a,{label:"Secret",className:"content__text-field",value:r,margin:"normal",InputProps:{readOnly:!0},type:"text",fullWidth:!0})]})},oa=function(e){var t=e.onClose;return Object(oe.jsx)(tt.a,{children:Object(oe.jsx)(nt.a,{onClick:t,children:"Close"})})},ia=function(e){var t=e.name,n=e.onChange;return Object(oe.jsx)(et.a,{className:"service-account-dialog__content content",children:Object(oe.jsx)(Dt.a,{autoFocus:!0,className:"content__text-field",value:t,onChange:function(e){return n(e.target.value)},margin:"normal",label:"Account name",type:"text",fullWidth:!0})})},sa=function(e){var t=e.onClose,n=e.onCreate,r=e.disabled;return Object(oe.jsxs)(tt.a,{children:[Object(oe.jsx)(nt.a,{onClick:t,"data-testid":"cancel-button",children:"Cancel"}),Object(oe.jsx)(nt.a,{onClick:n,color:"primary","data-testid":"create-button",disabled:r,children:"Create"})]})},ua=function(e){var t=e.open,n=e.onClose,a=Object(r.useState)(void 0),c=Object(se.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)(""),u=Object(se.a)(s,2),l=u[0],d=u[1],j=function(){d(""),i(void 0),n(Object(Oe.isEmpty)(l)||!o?void 0:l)};return Object(oe.jsxs)($e.a,{open:t,onClose:j,className:"service-account-dialog",children:[Object(oe.jsx)(Xe.a,{children:"Create service account"}),o?Object(oe.jsx)(ca,{name:l,clientID:o.clientID,secret:o.secret}):Object(oe.jsx)(ia,{name:l,onChange:function(e){return d(e)}}),o?Object(oe.jsx)(oa,{onClose:j}):Object(oe.jsx)(sa,{onClose:j,onCreate:function(){S.creteServiceAccount(l).then((function(e){return i(e)}))},disabled:Object(Oe.isEmpty)(l)})]})},la=function(){var e=Object(r.useState)(!1),t=Object(se.a)(e,2),n=t[0],a=t[1],c=Object(h.c)((function(e){var t;return null===(t=e.admin)||void 0===t?void 0:t.serviceAccounts})),o=Object(h.c)((function(e){var t;return null===(t=e.admin)||void 0===t?void 0:t.authorizedUsers})),i=Object(h.c)((function(e){var t,n;return null===(t=e.authentication)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.name})),s=Object(h.b)();Object(r.useEffect)((function(){s(na()),s({type:ae})}),[s]);return Object(oe.jsxs)("div",{className:"admin-page",children:[Object(oe.jsx)(ua,{open:n,onClose:function(e){a(!1),e&&s(na())}}),Object(oe.jsxs)("div",{children:[Object(oe.jsxs)("div",{className:"admin-page__header",children:[Object(oe.jsx)("div",{children:"Service accounts"}),Object(oe.jsx)(nt.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return a(!0)},children:"Create"})]}),Object(oe.jsx)(Ke.a,{className:"admin-page__content",children:c?Object(oe.jsx)(ea,{accounts:c,username:i,onDelete:function(e){return s(function(e){return{type:ne,payload:e}}(e))}}):Object(oe.jsx)(da,{children:"Loading accounts..."})})]}),Object(oe.jsxs)("div",{children:[Object(oe.jsx)("div",{className:"admin-page__header",children:"Users"}),Object(oe.jsx)(Ke.a,{className:"admin-page__content",children:o?Object(oe.jsx)(ra,{users:o}):Object(oe.jsx)(da,{children:"Loading users..."})})]})]})},da=function(e){var t=e.children;return Object(oe.jsx)("div",{className:"admin-page__placeholder",children:t})},ja=n(598),ba=n(599),ha=n(597),Oa=Object(ha.a)({root:{position:"fixed",bottom:0,left:0,right:0}}),pa=function(){var e=Object(b.h)().pathname,t=Object(b.g)(),n=Oa().root;return Object(oe.jsxs)(ja.a,{value:e,onChange:function(e,n){return t.push(n)},className:n,showLabels:!0,"data-testid":"bottom-navigation-bar",children:[Object(oe.jsx)(ba.a,{label:"Registration",value:"/registration",icon:Object(oe.jsx)(ke.a,{})}),Object(oe.jsx)(ba.a,{label:"Reporting",value:"/reporting",icon:Object(oe.jsx)(_e.a,{})})]})},fa=function(){return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Ae,{}),Object(oe.jsxs)(b.d,{children:[Object(oe.jsx)(b.b,{path:"/",exact:!0,component:ze}),Object(oe.jsx)(Ge,{path:"/registration",component:_n}),Object(oe.jsx)(Ge,{path:"/reporting",component:Wr}),Object(oe.jsx)(Ge,{path:"/settings",component:Nn}),Object(oe.jsx)(Ge,{path:"/admin",component:la}),Object(oe.jsx)(b.b,{component:Fe})]}),Object(oe.jsx)(Fr,{})]})},ga=function(){var e=Object(h.c)(ge);return Object(oe.jsxs)("div",{children:[Object(oe.jsx)(Se,{}),Object(oe.jsxs)(b.d,{children:[Object(oe.jsx)(b.b,{path:"/",exact:!0,component:ze}),Object(oe.jsx)(Ge,{path:"/registration",component:Zn}),Object(oe.jsx)(Ge,{path:"/reporting",component:Xr}),Object(oe.jsx)(Ge,{path:"/settings",component:Qn}),Object(oe.jsx)(b.b,{component:Fe})]}),e&&Object(oe.jsx)(pa,{})]})},xa=Object(l.a)()((function(e){var t=e.width;return Object(l.b)("md",t)?Object(oe.jsx)(fa,{}):Object(oe.jsx)(ga,{})})),ma=function(){return Object(oe.jsxs)(r.Fragment,{children:[Object(oe.jsx)(o.a,{}),Object(oe.jsx)(i.a,{theme:u,children:Object(oe.jsx)(c.a,{basename:"/open-trapp-ui",children:Object(oe.jsx)(xa,{})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var va=n(107),ya=E.authorizedUser,ka=ya?{loggedIn:!0,user:ya}:{loggedIn:!1};var wa={selectedMonth:{year:k()().year(),month:k()().month()+1}};var _a={workLogs:[],tags:[]};var Na=function(e){return{workLog:Object(He.a)({expression:"",tags:[],days:[k()().format("YYYY/MM/DD")],workload:"",valid:!1},e),presets:[]}};var Ca=Object(va.b)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return{loggedIn:!0,user:t.payload};case D:return{loggedIn:!1};default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(He.a)(Object(He.a)({},e),{},{days:t.payload.days});case M:return Object(He.a)(Object(He.a)({},e),{},{selectedMonth:{year:t.payload.year,month:t.payload.month},days:void 0});default:return e}},workLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(He.a)(Object(He.a)({},e),{},{workLogs:t.payload});case z:return Object(He.a)(Object(He.a)({},e),{},{tags:t.payload});case F:return Object(He.a)(Object(He.a)({},e),{},{workLogs:e.workLogs.map((function(e){return e.id===t.payload.id?t.payload:e}))});case H:return Object(He.a)(Object(He.a)({},e),{},{workLogs:e.workLogs.filter((function(e){return e.id!==t.payload}))});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(He.a)(Object(He.a)({},e),{},{workLog:t.payload});case J:return{workLog:Na({days:e.workLog.days}).workLog,presets:e.presets};case Q:return Object(He.a)(Object(He.a)({},e),{},{presets:t.payload});default:return e}},notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifications:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{notifications:[].concat(Object(he.a)(e.notifications),[t.payload])};case X:return{notifications:e.notifications.filter((function(e){return e.id!==t.payload}))};default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(He.a)(Object(He.a)({},e),{},{serviceAccounts:t.payload});case re:return Object(He.a)(Object(He.a)({},e),{},{serviceAccounts:e.serviceAccounts.filter((function(e){return e.clientID!==t.payload}))});case ce:return Object(He.a)(Object(He.a)({},e),{},{authorizedUsers:t.payload});default:return e}}}),Ea=n(605),Aa=n(613),Sa=n(309),La=n(610),Ta=n(602),Da=n(603),Ra=n(164),Ia=n(615),Ma=n(305),Wa=n(167),Pa=n(604),Ya=function(){function e(t){Object(g.a)(this,e),this.tags=t}return Object(x.a)(e,[{key:"toString",value:function(){return this.tags.map((function(e){return"#".concat(e)})).join(", ")}}]),e}(),Ua=Object(Aa.a)((function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(M,R),Object(_.a)((function(e){return e.payload})),Object(La.a)(t.pipe(Object(_.a)(xe))),Object(_.a)((function(e){var t=Object(se.a)(e,2),n=t[0],r=t[1];return Object(Oe.isNil)(n)?r:n})),Object(Ta.a)((function(e){var t=e.year,n=e.month;return r.calendarMonth(t,n)})),Object(_.a)((function(e){return{type:I,payload:e}})),Object(Da.a)((function(e){return console.error(e),Object(Ra.a)(Gr("Month data fetching failed"))})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(M,W,R,J,K),Object(_.a)((function(e){return e.payload})),Object(La.a)(t.pipe(Object(_.a)((function(e){return e.calendar.selectedMonth})))),Object(_.a)((function(e){var t=Object(se.a)(e,2),n=t[0],r=t[1];return Object(Oe.isNil)(n)?r:n})),Object(Ma.a)((function(e){var t=e.year,n=e.month;return r.workLogEntries(t,n)})),Object(_.a)((function(e){return{type:P,payload:e}})),Object(Da.a)((function(e){return console.error("Workloads fetching failed",e),Object(Ra.a)(Gr("Workloads fetching failed"))})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(Y),Object(_.a)((function(e){return e.payload})),Object(La.a)(t.pipe(Object(_.a)((function(e){var t;return null===(t=e.authentication.user)||void 0===t?void 0:t.name})))),Object(Ma.a)((function(e){var t=Object(se.a)(e,2),n=t[0],a=t[1];return Object(Ia.a)(function(e,t,n){return Object(w.a)(e.days.map((function(r){return n.saveWorkLog(t,r,e.tags,e.workload,e.note)}))).pipe(Object(Wa.a)(),Object(Pa.a)())}(n,a,r),Object(Ra.a)({type:J}),Object(Ra.a)(zr("Work log created")))})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(B),Object(_.a)((function(e){return e.payload})),Object(Ma.a)((function(e){return r.removeWorkLog(e)})),Object(Ma.a)((function(e){return[qt(e),zr("Work log removed")]})),Object(Da.a)((function(e){return console.error("Removal of worklog failed",e),Object(Ra.a)(Gr("Removing work log failed"))})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(G),Object(_.a)((function(e){return e.payload})),Object(Ma.a)((function(e){var t=e.id,n=e.tags,a=e.workload;return r.updateWorkLog(t,n,a)})),Object(Ma.a)((function(e){return[(t=e,{type:F,payload:t}),zr("Work log updated")];var t})),Object(Da.a)((function(e){return console.error(e),Object(Ra.a)(Gr("Update of work log failed"))})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(ee),Object(Ta.a)((function(e){return r.serviceAccounts})),Object(_.a)((function(e){return function(e){return{type:te,payload:e}}(e)})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(ne),Object(_.a)((function(e){return e.payload})),Object(Ta.a)((function(e){return r.deleteServiceAccount(e)})),Object(_.a)((function(e){return function(e){return{type:re,payload:e}}(e)})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(ae),Object(Ta.a)((function(e){return r.authorizedUsers})),Object(_.a)((function(e){return function(e){return{type:ce,payload:e}}(e)})))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(Z),Object(_.a)((function(e){return e.payload})),Object(Ma.a)((function(e){return r.presets(e)})),Object(_.a)((function(e){return e.map((function(e){return new Ya(e)}))})),Object(_.a)(mn))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(U),Object(_.a)((function(e){return e.payload})),Object(Ma.a)((function(e){return r.tags(e)})),Object(_.a)(Bt))}),(function(e,t,n){var r=n.openTrappApi;return e.pipe(Object(Sa.a)(q),Object(_.a)((function(e){return e.payload})),Object(Ma.a)((function(e){return r.bulkEdit(e)})),Object(_.a)(Kt),Object(Da.a)((function(e){return console.error(e),Object(Ra.a)(Gr("Bulk edit failed"))})))})),za=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||va.c;a.render(Object(oe.jsx)(h.a,{store:function(){var e=Object(Ea.a)({dependencies:{openTrappApi:S}}),t=Object(va.d)(Ca,za(Object(va.a)(e)));return e.run(Ua),t}(),children:Object(oe.jsx)(ma,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[518,1,2]]]);
//# sourceMappingURL=main.f5c984c7.chunk.js.map